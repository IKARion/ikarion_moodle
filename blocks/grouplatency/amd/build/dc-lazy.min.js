!function(){function a(a,b){"use strict";function c(a,b){for(var c=0;c<a.length;c++)if(a[c].key===b)return a[c]}var d={version:"3.0.2",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};d.chartRegistry=function(){function a(a){return a||(a=d.constants.DEFAULT_CHART_GROUP),b[a]||(b[a]=[]),a}var b={};return{has:function(a){for(var c in b)if(b[c].indexOf(a)>=0)return!0;return!1},register:function(c,d){d=a(d),b[d].push(c)},deregister:function(c,d){d=a(d);for(var e=0;e<b[d].length;e++)if(b[d][e].anchorName()===c.anchorName()){b[d].splice(e,1);break}},clear:function(a){a?delete b[a]:b={}},list:function(c){return c=a(c),b[c]}}}(),d.registerChart=function(a,b){d.chartRegistry.register(a,b)},d.deregisterChart=function(a,b){d.chartRegistry.deregister(a,b)},d.hasChart=function(a){return d.chartRegistry.has(a)},d.deregisterAllCharts=function(a){d.chartRegistry.clear(a)},d.filterAll=function(a){for(var b=d.chartRegistry.list(a),c=0;c<b.length;++c)b[c].filterAll()},d.refocusAll=function(a){for(var b=d.chartRegistry.list(a),c=0;c<b.length;++c)b[c].focus&&b[c].focus()},d.renderAll=function(a){for(var b=d.chartRegistry.list(a),c=0;c<b.length;++c)b[c].render();null!==d._renderlet&&d._renderlet(a)},d.redrawAll=function(a){for(var b=d.chartRegistry.list(a),c=0;c<b.length;++c)b[c].redraw();null!==d._renderlet&&d._renderlet(a)},d.disableTransitions=!1,d.transition=function(a,b,c,e){if(d.disableTransitions||b<=0)return a;var f=a.transition(e);return(b>=0||void 0!==b)&&(f=f.duration(b)),(c>=0||void 0!==c)&&(f=f.delay(c)),f},d.optionalTransition=function(a,b,c,e){return a?function(a){return d.transition(a,b,c,e)}:function(a){return a}},d.afterTransition=function(a,b){if(a.empty()||!a.duration)b.call(a);else{var c=0;a.each(function(){++c}).on("end",function(){--c||b.call(a)})}},d.units={},d.units.integers=function(a,b){return Math.abs(b-a)},d.units.ordinal=function(){throw new Error("dc.units.ordinal should not be called - it is a placeholder")},d.units.fp={},d.units.fp.precision=function(a){var b=function(a,c){var e=Math.abs((c-a)/b.resolution);return d.utils.isNegligible(e-Math.floor(e))?Math.floor(e):Math.ceil(e)};return b.resolution=a,b},d.round={},d.round.floor=function(a){return Math.floor(a)},d.round.ceil=function(a){return Math.ceil(a)},d.round.round=function(a){return Math.round(a)},d.override=function(a,b,c){var d=a[b];a["_"+b]=d,a[b]=c},d.renderlet=function(a){return arguments.length?(d._renderlet=a,d):d._renderlet},d.instanceOfChart=function(a){return a instanceof Object&&a.__dcFlag__&&!0},d.errors={},d.errors.Exception=function(a){var b=a||"Unexpected internal error";this.message=b,this.toString=function(){return b},this.stack=(new Error).stack},d.errors.Exception.prototype=Object.create(Error.prototype),d.errors.Exception.prototype.constructor=d.errors.Exception,d.errors.InvalidStateException=function(){d.errors.Exception.apply(this,arguments)},d.errors.InvalidStateException.prototype=Object.create(d.errors.Exception.prototype),d.errors.InvalidStateException.prototype.constructor=d.errors.InvalidStateException,d.errors.BadArgumentException=function(){d.errors.Exception.apply(this,arguments)},d.errors.BadArgumentException.prototype=Object.create(d.errors.Exception.prototype),d.errors.BadArgumentException.prototype.constructor=d.errors.BadArgumentException,d.dateFormat=a.timeFormat("%m/%d/%Y"),d.printers={},d.printers.filters=function(a){for(var b="",c=0;c<a.length;++c)c>0&&(b+=", "),b+=d.printers.filter(a[c]);return b},d.printers.filter=function(a){var b="";return"undefined"!=typeof a&&null!==a&&(a instanceof Array?a.length>=2?b="["+d.utils.printSingleValue(a[0])+" -> "+d.utils.printSingleValue(a[1])+"]":a.length>=1&&(b=d.utils.printSingleValue(a[0])):b=d.utils.printSingleValue(a)),b},d.pluck=function(a,b){return b?function(c,d){return b.call(c,c[a],d)}:function(b){return b[a]}},d.utils={},d.utils.printSingleValue=function(a){var b=""+a;return a instanceof Date?b=d.dateFormat(a):"string"==typeof a?b=a:d.utils.isFloat(a)?b=d.utils.printSingleValue.fformat(a):d.utils.isInteger(a)&&(b=Math.round(a)),b},d.utils.printSingleValue.fformat=a.format(".2f"),d.utils.toTimeFunc=function(a){return"time"+a.charAt(0).toUpperCase()+a.slice(1)},d.utils.add=function(b,c,e){if("string"==typeof c&&(c=c.replace("%","")),b instanceof Date)return"string"==typeof c&&(c=+c),"millis"===e?new Date(b.getTime()+c):(e=e||a.timeDay,"function"!=typeof e&&(e=a[d.utils.toTimeFunc(e)]),e.offset(b,c));if("string"==typeof c){var f=+c/100;return b>0?b*(1+f):b*(1-f)}return b+c},d.utils.subtract=function(b,c,e){if("string"==typeof c&&(c=c.replace("%","")),b instanceof Date)return"string"==typeof c&&(c=+c),"millis"===e?new Date(b.getTime()-c):(e=e||a.timeDay,"function"!=typeof e&&(e=a[d.utils.toTimeFunc(e)]),e.offset(b,-c));if("string"==typeof c){var f=+c/100;return b<0?b*(1+f):b*(1-f)}return b-c},d.utils.isNumber=function(a){return a===+a},d.utils.isFloat=function(a){return a===+a&&a!==(0|a)},d.utils.isInteger=function(a){return a===+a&&a===(0|a)},d.utils.isNegligible=function(a){return!d.utils.isNumber(a)||a<d.constants.NEGLIGIBLE_NUMBER&&a>-d.constants.NEGLIGIBLE_NUMBER},d.utils.clamp=function(a,b,c){return a<b?b:a>c?c:a},d.utils.constant=function(a){return function(){return a}};var e=0;return d.utils.uniqueId=function(){return++e},d.utils.nameToId=function(a){return a.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},d.utils.appendOrSelect=function(a,b,c){c=c||b;var d=a.select(b);return d.empty()&&(d=a.append(c)),d},d.utils.safeNumber=function(a){return d.utils.isNumber(+a)?+a:0},d.utils.arraysEqual=function(a,b){return a&&b?a.length===b.length&&a.every(function(a,c){return a===b[c]||a.toString()===b[c].toString()}):a===b},d.utils.allChildren=function(a){var b=[];if(b.push(a.path),console.log("currentNode",a),a.children)for(var c=0;c<a.children.length;c++)b=b.concat(d.utils.allChildren(a.children[c]));return b},d.utils.toHierarchy=function(a,b){for(var d={key:"root",children:[]},e=0;e<a.length;e++)for(var f=a[e],g=f.key,h=b(f),i=d,j=0;j<g.length;j++){var k,l=g.slice(0,j+1),m=i.children,n=g[j];j+1<g.length?(k=c(m,n),void 0===k&&(k={key:n,children:[],path:l},m.push(k)),i=k):(k={key:n,value:h,data:f,path:l},m.push(k))}return d},d.utils.getAncestors=function(a){for(var b=[],c=a;c.parent;)b.unshift(c.name),c=c.parent;return b},d.utils.arraysIdentical=function(a,b){var c=a.length;if(c!==b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},d.logger=function(){var a={};a.enableDebugLog=!1,a.warn=function(b){return console&&(console.warn?console.warn(b):console.log&&console.log(b)),a};var b={};return a.warnOnce=function(c){return b[c]||(b[c]=!0,d.logger.warn(c)),a},a.debug=function(b){return a.enableDebugLog&&console&&(console.debug?console.debug(b):console.log&&console.log(b)),a},a.deprecate=function(b,c){function d(){return e||(a.warn(c),e=!0),b.apply(this,arguments)}var e=!1;return d},a}(),d.config=function(){var a={},b=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],c=b;return a.defaultColors=function(e){return arguments.length?(c=e,a):(c===b&&d.logger.warnOnce("You are using d3.schemeCategory20c, which has been removed in D3v5. See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. DC is using it for backward compatibility, however it will be changed in DCv3.1. You can change it by calling dc.config.defaultColors(newScheme). See https://github.com/d3/d3-scale-chromatic for some alternatives."),c)},a}(),d.events={current:null},d.events.trigger=function(a,b){return b?(d.events.current=a,void setTimeout(function(){a===d.events.current&&a()},b)):void a()},d.filters={},d.filters.RangedFilter=function(a,b){var c=new Array(a,b);return c.isFiltered=function(a){return a>=this[0]&&a<this[1]},c.filterType="RangedFilter",c},d.filters.TwoDimensionalFilter=function(a){if(null===a)return null;var b=a;return b.isFiltered=function(a){return a.length&&a.length===b.length&&a[0]===b[0]&&a[1]===b[1]},b.filterType="TwoDimensionalFilter",b},d.filters.RangedTwoDimensionalFilter=function(a){if(null===a)return null;var b,c=a;return b=c[0]instanceof Array?[[Math.min(a[0][0],a[1][0]),Math.min(a[0][1],a[1][1])],[Math.max(a[0][0],a[1][0]),Math.max(a[0][1],a[1][1])]]:[[a[0],-(1/0)],[a[1],1/0]],c.isFiltered=function(a){var c,d;return a instanceof Array?(c=a[0],d=a[1]):(c=a,d=b[0][1]),c>=b[0][0]&&c<b[1][0]&&d>=b[0][1]&&d<b[1][1]},c.filterType="RangedTwoDimensionalFilter",c},d.filters.HierarchyFilter=function(a){if(null===a)return null;var b=a.slice(0);return b.isFiltered=function(a){if(!(b.length&&a&&a.length&&a.length>=b.length))return!1;for(var c=0;c<b.length;c++)if(a[c]!==b[c])return!1;return!0},b},d.baseMixin=function(c){function e(){m&&(z?m.attr("viewBox")||m.attr("viewBox","0 0 "+c.width()+" "+c.height()):m.attr("width",c.width()).attr("height",c.height()))}function f(){return m=c.root().append("svg"),e(),m}function g(a){if(!c[a]||!c[a]())throw new d.errors.InvalidStateException("Mandatory attribute chart."+a+" is missing on chart[#"+c.anchorName()+"]")}function h(a){if(c.dimension()&&c.dimension().filter){var b=P(c.dimension(),a);b&&(a=b)}return a}c.__dcFlag__=d.utils.uniqueId();var i,j,k,l,m,n,o,p,q,r,s,t=200,u=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().width;return b&&b>t?b:t},v=u,w=200,x=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().height;return b&&b>w?b:w},y=x,z=!1,A=d.pluck("key"),B=d.pluck("value"),C=d.pluck("key"),D=d.pluck("key"),E=!1,F=function(a){return c.keyAccessor()(a)+": "+c.valueAccessor()(a)},G=!0,H=!1,I=750,J=0,K=d.printers.filters,L=["dimension","group"],M=d.constants.DEFAULT_CHART_GROUP,N=a.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),O=[],P=function(a,b){return 0===b.length?a.filter(null):1!==b.length||b[0].isFiltered?1===b.length&&"RangedFilter"===b[0].filterType?a.filterRange(b[0]):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(d<=a&&d>=a)return!0}return!1}):a.filterExact(b[0]),b},Q=function(a){return a.all()};c.height=function(a){return arguments.length?(y=a?"function"==typeof a?a:d.utils.constant(a):x,p=void 0,c):(d.utils.isNumber(p)||(p=y(l.node())),p)},c.width=function(a){return arguments.length?(v=a?"function"==typeof a?a:d.utils.constant(a):u,o=void 0,c):(d.utils.isNumber(o)||(o=v(l.node())),o)},c.minWidth=function(a){return arguments.length?(t=a,c):t},c.minHeight=function(a){return arguments.length?(w=a,c):w},c.useViewBoxResizing=function(a){return arguments.length?(z=a,c):z},c.dimension=function(a){return arguments.length?(i=a,c.expireCache(),c):i},c.data=function(a){return arguments.length?(Q="function"==typeof a?a:d.utils.constant(a),c.expireCache(),c):Q.call(c,j)},c.group=function(a,b){return arguments.length?(j=a,c._groupName=b,c.expireCache(),c):j},c.ordering=function(a){return arguments.length?(D=a,q=b.quicksort.by(D),c.expireCache(),c):D},c._computeOrderedGroups=function(a){var c=a.slice(0);return c.length<=1?c:(q||(q=b.quicksort.by(D)),q(c,0,c.length))},c.filterAll=function(){return c.filter(null)},c.select=function(a){return l.select(a)},c.selectAll=function(a){return l?l.selectAll(a):null},c.anchor=function(b,e){if(!arguments.length)return k;if(d.instanceOfChart(b))k=b.anchor(),l=b.root(),n=!0;else{if(!b)throw new d.errors.BadArgumentException("parent must be defined");k=b.select&&b.classed?b.node():b,l=a.select(k),l.classed(d.constants.CHART_CLASS,!0),d.registerChart(c,e),n=!1}return M=e,c},c.anchorName=function(){var a=c.anchor();return a&&a.id?a.id:a&&a.replace?a.replace("#",""):"dc-chart"+c.chartID()},c.root=function(a){return arguments.length?(l=a,c):l},c.svg=function(a){return arguments.length?(m=a,c):m},c.resetSvg=function(){return c.select("svg").remove(),f()},c.filterPrinter=function(a){return arguments.length?(K=a,c):K},c.controlsUseVisibility=function(a){return arguments.length?(H=a,c):H},c.turnOnControls=function(){if(l){var a=c.controlsUseVisibility()?"visibility":"display";c.selectAll(".reset").style(a,null),c.selectAll(".filter").text(K(c.filters())).style(a,null)}return c},c.turnOffControls=function(){if(l){var a=c.controlsUseVisibility()?"visibility":"display",b=c.controlsUseVisibility()?"hidden":"none";c.selectAll(".reset").style(a,b),c.selectAll(".filter").style(a,b).text(c.filter())}return c},c.transitionDuration=function(a){return arguments.length?(I=a,c):I},c.transitionDelay=function(a){return arguments.length?(J=a,c):J},c._mandatoryAttributes=function(a){return arguments.length?(L=a,c):L},c.render=function(){p=o=void 0,N.call("preRender",c,c),L&&L.forEach(g);var a=c._doRender();return r&&r.render(),c._activateRenderlets("postRender"),a},c._activateRenderlets=function(a){N.call("pretransition",c,c),c.transitionDuration()>0&&m?m.transition().duration(c.transitionDuration()).delay(c.transitionDelay()).on("end",function(){N.call("renderlet",c,c),a&&N.call(a,c,c)}):(N.call("renderlet",c,c),a&&N.call(a,c,c))},c.redraw=function(){e(),N.call("preRedraw",c,c);var a=c._doRedraw();return r&&r.render(),c._activateRenderlets("postRedraw"),a},c.commitHandler=function(a){return arguments.length?(s=a,c):s},c.redrawGroup=function(){return s?s(!1,function(a,b){a?console.log(a):d.redrawAll(c.chartGroup())}):d.redrawAll(c.chartGroup()),c},c.renderGroup=function(){return s?s(!1,function(a,b){a?console.log(a):d.renderAll(c.chartGroup())}):d.renderAll(c.chartGroup()),c},c._invokeFilteredListener=function(a){void 0!==a&&N.call("filtered",c,c,a)},c._invokeZoomedListener=function(){N.call("zoomed",c,c)};var R=function(a,b){return null===b||"undefined"==typeof b?a.length>0:a.some(function(a){return b<=a&&b>=a})};c.hasFilterHandler=function(a){return arguments.length?(R=a,c):R},c.hasFilter=function(a){return R(O,a)};var S=function(a,b){for(var c=0;c<a.length;c++)if(a[c]<=b&&a[c]>=b){a.splice(c,1);break}return a};c.removeFilterHandler=function(a){return arguments.length?(S=a,c):S};var T=function(a,b){return a.push(b),a};c.addFilterHandler=function(a){return arguments.length?(T=a,c):T};var U=function(a){return[]};return c.resetFilterHandler=function(a){return arguments.length?(U=a,c):U},c.replaceFilter=function(a){return O=U(O),c.filter(a),c},c.filter=function(a){if(!arguments.length)return O.length>0?O[0]:null;var b=O;return a instanceof Array&&a[0]instanceof Array&&!a.isFiltered?a[0].forEach(function(a){b=R(b,a)?S(b,a):T(b,a)}):b=null===a?U(b):R(b,a)?S(b,a):T(b,a),O=h(b),c._invokeFilteredListener(a),null!==l&&c.hasFilter()?c.turnOnControls():c.turnOffControls(),c},c.filters=function(){return O},c.highlightSelected=function(b){a.select(b).classed(d.constants.SELECTED_CLASS,!0),a.select(b).classed(d.constants.DESELECTED_CLASS,!1)},c.fadeDeselected=function(b){a.select(b).classed(d.constants.SELECTED_CLASS,!1),a.select(b).classed(d.constants.DESELECTED_CLASS,!0)},c.resetHighlight=function(b){a.select(b).classed(d.constants.SELECTED_CLASS,!1),a.select(b).classed(d.constants.DESELECTED_CLASS,!1)},c.onClick=function(a){var b=c.keyAccessor()(a);d.events.trigger(function(){c.filter(b),c.redrawGroup()})},c.filterHandler=function(a){return arguments.length?(P=a,c):P},c._doRender=function(){return c},c._doRedraw=function(){return c},c.legendables=function(){return[]},c.legendHighlight=function(){},c.legendReset=function(){},c.legendToggle=function(){},c.isLegendableHidden=function(){return!1},c.keyAccessor=function(a){return arguments.length?(A=a,c):A},c.valueAccessor=function(a){return arguments.length?(B=a,c):B},c.label=function(a,b){return arguments.length?(C=a,(void 0===b||b)&&(E=!0),c):C},c.renderLabel=function(a){return arguments.length?(E=a,c):E},c.title=function(a){return arguments.length?(F=a,c):F},c.renderTitle=function(a){return arguments.length?(G=a,c):G},c.renderlet=d.logger.deprecate(function(a){return c.on("renderlet."+d.utils.uniqueId(),a),c},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),c.chartGroup=function(a){return arguments.length?(n||d.deregisterChart(c,M),M=a,n||d.registerChart(c,M),c):M},c.expireCache=function(){return c},c.legend=function(a){return arguments.length?(r=a,r.parent(c),c):r},c.chartID=function(){return c.__dcFlag__},c.options=function(a){var b=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var e in a)"function"==typeof c[e]?a[e]instanceof Array&&b.indexOf(e)!==-1?c[e].apply(c,a[e]):c[e].call(c,a[e]):d.logger.debug("Not a valid option setter name: "+e);return c},c.on=function(a,b){return N.on(a,b),c},c},d.marginMixin=function(a){var b={top:10,right:50,bottom:30,left:30};return a.margins=function(c){return arguments.length?(b=c,a):b},a.effectiveWidth=function(){return a.width()-a.margins().left-a.margins().right},a.effectiveHeight=function(){return a.height()-a.margins().top-a.margins().bottom},a},d.colorMixin=function(b){var c=a.scaleOrdinal(d.config.defaultColors()),e=!0,f=function(a){return b.keyAccessor()(a)};return b.colors=function(e){return arguments.length?(c=e instanceof Array?a.scaleQuantize().range(e):"function"==typeof e?e:d.utils.constant(e),b):c},b.ordinalColors=function(c){return b.colors(a.scaleOrdinal().range(c))},b.linearColors=function(c){return b.colors(a.scaleLinear().range(c).interpolate(a.interpolateHcl))},b.colorAccessor=function(a){return arguments.length?(f=a,e=!1,b):f},b.defaultColorAccessor=function(){return e},b.colorDomain=function(a){return arguments.length?(c.domain(a),b):c.domain()},b.calculateColorDomain=function(){var d=[a.min(b.data(),b.colorAccessor()),a.max(b.data(),b.colorAccessor())];return c.domain(d),b},b.getColor=function(a,b){return c(f.call(this,a,b))},b.colorCalculator=d.logger.deprecate(function(a){return arguments.length?(b.getColor=a,b):b.getColor},"colorMixin.colorCalculator has been deprecated. Please colorMixin.colors and colorMixin.colorAccessor instead"),b},d.coordinateGridMixin=function(b){function c(c,f){b.isOrdinal()?(B.bandwidth||(d.logger.warn("For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need d3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). Replacing .x() with a d3.scaleBand with the same domain - make the same change in your code to avoid this warning!"),B=a.scaleBand().domain(B.domain())),(b.elasticX()||0===B.domain().length)&&B.domain(b._ordinalXDomain())):b.elasticX()&&B.domain([b.xAxisMin(),b.xAxisMax()]);var g=B.domain();!f&&d.utils.arraysEqual(F,g)||b.rescale(),F=g,b.isOrdinal()?B.range([0,b.xAxisLength()]).paddingInner(ja).paddingOuter(b._useOuterPadding()?ia:0):B.range([0,b.xAxisLength()]),N=N.scale(b.x()),e(c)}function e(a){var c=a.select("g."+t);if(_){c.empty()&&(c=a.insert("g",":first-child").attr("class",r+" "+t).attr("transform","translate("+b.margins().left+","+b.margins().top+")"));var e=N.tickValues()?N.tickValues():"function"==typeof B.ticks?B.ticks.apply(B,N.tickArguments()):B.domain(),f=c.selectAll("line").data(e),g=f.enter().append("line").attr("x1",function(a){return B(a)}).attr("y1",b._xAxisY()-b.margins().top).attr("x2",function(a){return B(a)}).attr("y2",0).attr("opacity",0);d.transition(g,b.transitionDuration(),b.transitionDelay()).attr("opacity",1);var h=g.merge(f);d.transition(h,b.transitionDuration(),b.transitionDelay()).attr("x1",function(a){return B(a)}).attr("y1",b._xAxisY()-b.margins().top).attr("x2",function(a){return B(a)}).attr("y2",0),f.exit().remove()}else c.selectAll("line").remove()}function f(){return ka?a.axisRight():a.axisLeft()}function g(){return b.anchorName().replace(/[ .#=\[\]"]/g,"-")+"-clip"}function h(){var a=d.utils.appendOrSelect(y,"defs"),c=g(),e=d.utils.appendOrSelect(a,"#"+c,"clipPath").attr("id",c),f=2*ha;d.utils.appendOrSelect(e,"rect").attr("width",b.xAxisLength()+f).attr("height",b.yAxisHeight()+f).attr("transform","translate(-"+ha+", -"+ha+")")}function i(a){b.isOrdinal()&&(Y=!1),c(b.g(),a),b._prepareYAxis(b.g()),b.plotData(),(b.elasticX()||aa||a)&&b.renderXAxis(b.g()),(b.elasticY()||aa||a)&&b.renderYAxis(b.g()),a?b.renderBrush(b.g(),!1):b.redrawBrush(b.filter(),aa),b.fadeDeselectedArea(b.filter()),aa=!1}function j(){C=B.copy(),ga?b._enableMouseZoom():fa&&b._disableMouseZoom()}function k(a,c){var e;q(a)?(b.x().domain(a),e=d.filters.RangedFilter(a[0],a[1])):(b.x().domain(D),e=null),b.replaceFilter(e),b.rescale(),b.redraw(),c||(L&&!p(b.filter(),L.filter())&&d.events.trigger(function(){L.replaceFilter(e),L.redraw()}),b._invokeZoomedListener(),d.events.trigger(function(){b.redrawGroup()},d.constants.EVENT_DELAY))}function l(b,c,d){var e=(c[1]-c[0])/(b[1]-b[0]),f=-1*d(b[0]);return a.zoomIdentity.scale(e).translate(f,0)}function m(){da&&da.transform(b.root(),l(b.x().domain(),D,C))}function n(){if(a.event.sourceEvent&&(!a.event.sourceEvent.type||["start","zoom","end"].indexOf(a.event.sourceEvent.type)===-1)){var c=a.event.transform.rescaleX(C).domain();b.focus(c,!1)}}function o(a,b){return a&&2===a.length&&b&&2===b.length?((a[0]>b[1]||a[1]<b[0])&&console.warn("Could not intersect extents, will reset"),[a[0]>b[0]?a[0]:b[0],a[1]<b[1]?a[1]:b[1]]):a}function p(a,b){return!a&&!b||!(!a||!b)&&(0===a.length&&0===b.length||a[0].valueOf()===b[0].valueOf()&&a[1].valueOf()===b[1].valueOf())}function q(a){return a instanceof Array&&a.length>1}var r="grid-line",s="horizontal",t="vertical",u="y-axis-label",v="x-axis-label",w="custom-brush-handle",x=12;b=d.colorMixin(d.marginMixin(d.baseMixin(b))),b.colors(a.scaleOrdinal(a.schemeCategory10)),b._mandatoryAttributes().push("x");var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=a.axisBottom(),O=d.units.integers,P=0,Q=a.timeDay,R=!1,S=0,T=null,U=0,V=!1,W=0,X=a.brushX(),Y=!0,Z=!1,$=!1,_=!1,aa=!1,ba=[1,1/0],ca=!0,da=a.zoom().on("zoom",n),ea=a.zoom().on("zoom",null),fa=!1,ga=!1,ha=0,ia=.5,ja=0,ka=!1;return b.rescale=function(){return K=void 0,aa=!0,b},b.resizing=function(){return aa},b.rangeChart=function(a){return arguments.length?(L=a,L.focusChart(b),b):L},b.zoomScale=function(a){return arguments.length?(ba=a,b):ba},b.zoomOutRestrict=function(a){return arguments.length?(ca=a,b):ca},b._generateG=function(a){y=void 0===a?b.svg():a;var c=window.location.href.split("#")[0];return z=y.append("g"),A=z.append("g").attr("class","chart-body").attr("transform","translate("+b.margins().left+", "+b.margins().top+")").attr("clip-path","url("+c+"#"+g()+")"),z},b.g=function(a){return arguments.length?(z=a,b):z},b.mouseZoomable=function(a){return arguments.length?(ga=a,b):ga},b.chartBodyG=function(a){return arguments.length?(A=a,b):A},b.x=function(a){return arguments.length?(B=a,D=B.domain(),b.rescale(),b):B},b.xOriginalDomain=function(){return D},b.xUnits=function(a){return arguments.length?(O=a,b):O},b.xAxis=function(a){return arguments.length?(N=a,b):N},b.elasticX=function(a){return arguments.length?(R=a,b):R},b.xAxisPadding=function(a){return arguments.length?(P=a,b):P},b.xAxisPaddingUnit=function(a){return arguments.length?(Q=a,b):Q},b.xUnitCount=function(){return void 0===K&&(b.isOrdinal()?K=b.x().domain().length:(K=b.xUnits()(b.x().domain()[0],b.x().domain()[1]),K instanceof Array&&(K=K.length))),K},b.useRightYAxis=function(a){return arguments.length?(ka!==a&&T&&d.logger.warn("Value of useRightYAxis has been altered, after yAxis was created. You might get unexpected yAxis behavior. Make calls to useRightYAxis sooner in your chart creation process."),ka=a,b):ka},b.isOrdinal=function(){return b.xUnits()===d.units.ordinal},b._useOuterPadding=function(){return!0},b._ordinalXDomain=function(){var a=b._computeOrderedGroups(b.data());return a.map(b.keyAccessor())},b.renderXAxis=function(a){var c=a.select("g.x");c.empty()&&(c=a.append("g").attr("class","axis x").attr("transform","translate("+b.margins().left+","+b._xAxisY()+")"));var e=a.select("text."+v);e.empty()&&b.xAxisLabel()&&(e=a.append("text").attr("class",v).attr("transform","translate("+(b.margins().left+b.xAxisLength()/2)+","+(b.height()-S)+")").attr("text-anchor","middle")),b.xAxisLabel()&&e.text()!==b.xAxisLabel()&&e.text(b.xAxisLabel()),d.transition(c,b.transitionDuration(),b.transitionDelay()).attr("transform","translate("+b.margins().left+","+b._xAxisY()+")").call(N),d.transition(e,b.transitionDuration(),b.transitionDelay()).attr("transform","translate("+(b.margins().left+b.xAxisLength()/2)+","+(b.height()-S)+")")},b._xAxisY=function(){return b.height()-b.margins().bottom},b.xAxisLength=function(){return b.effectiveWidth()},b.xAxisLabel=function(a,c){return arguments.length?(E=a,b.margins().bottom-=S,S=void 0===c?x:c,b.margins().bottom+=S,b):E},b._prepareYAxis=function(c){if(void 0===G||b.elasticY()){void 0===G&&(G=a.scaleLinear());var d=b.yAxisMin()||0,e=b.yAxisMax()||0;G.domain([d,e]).rangeRound([b.yAxisHeight(),0])}G.range([b.yAxisHeight(),0]),T||(T=f()),T.scale(G),b._renderHorizontalGridLinesForAxis(c,G,T)},b.renderYAxisLabel=function(a,c,e,f){f=f||W;var g=b.g().select("text."+u+"."+a+"-label"),h=b.margins().top+b.yAxisHeight()/2;g.empty()&&c&&(g=b.g().append("text").attr("transform","translate("+f+","+h+"),rotate("+e+")").attr("class",u+" "+a+"-label").attr("text-anchor","middle").text(c)),c&&g.text()!==c&&g.text(c),d.transition(g,b.transitionDuration(),b.transitionDelay()).attr("transform","translate("+f+","+h+"),rotate("+e+")")},b.renderYAxisAt=function(a,c,e){var f=b.g().select("g."+a);f.empty()&&(f=b.g().append("g").attr("class","axis "+a).attr("transform","translate("+e+","+b.margins().top+")")),d.transition(f,b.transitionDuration(),b.transitionDelay()).attr("transform","translate("+e+","+b.margins().top+")").call(c)},b.renderYAxis=function(){var a=ka?b.width()-b.margins().right:b._yAxisX();b.renderYAxisAt("y",T,a);var c=ka?b.width()-W:W,d=ka?90:-90;b.renderYAxisLabel("y",b.yAxisLabel(),d,c)},b._renderHorizontalGridLinesForAxis=function(a,c,e){var f=a.select("g."+s);if($){var g=e.tickValues()?e.tickValues():c.ticks.apply(c,e.tickArguments());f.empty()&&(f=a.insert("g",":first-child").attr("class",r+" "+s).attr("transform","translate("+b.margins().left+","+b.margins().top+")"));var h=f.selectAll("line").data(g),i=h.enter().append("line").attr("x1",1).attr("y1",function(a){return c(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return c(a)}).attr("opacity",0);d.transition(i,b.transitionDuration(),b.transitionDelay()).attr("opacity",1);var j=i.merge(h);d.transition(j,b.transitionDuration(),b.transitionDelay()).attr("x1",1).attr("y1",function(a){return c(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return c(a)}),h.exit().remove()}else f.selectAll("line").remove()},b._yAxisX=function(){return b.useRightYAxis()?b.width()-b.margins().right:b.margins().left},b.yAxisLabel=function(a,c){return arguments.length?(H=a,b.margins().left-=W,W=void 0===c?x:c,b.margins().left+=W,b):H},b.y=function(a){return arguments.length?(G=a,b.rescale(),b):G},b.yAxis=function(a){return arguments.length?(T=a,b):(T||(T=f()),T)},b.elasticY=function(a){return arguments.length?(V=a,b):V},b.renderHorizontalGridLines=function(a){return arguments.length?($=a,b):$},b.renderVerticalGridLines=function(a){return arguments.length?(_=a,b):_},b.xAxisMin=function(){var c=a.min(b.data(),function(a){return b.keyAccessor()(a)});return d.utils.subtract(c,P,Q)},b.xAxisMax=function(){var c=a.max(b.data(),function(a){return b.keyAccessor()(a)});return d.utils.add(c,P,Q)},b.yAxisMin=function(){var c=a.min(b.data(),function(a){return b.valueAccessor()(a)});return d.utils.subtract(c,U)},b.yAxisMax=function(){var c=a.max(b.data(),function(a){return b.valueAccessor()(a)});return d.utils.add(c,U)},b.yAxisPadding=function(a){return arguments.length?(U=a,b):U},b.yAxisHeight=function(){return b.effectiveHeight()},b.round=function(a){return arguments.length?(J=a,b):J},b._rangeBandPadding=function(a){return arguments.length?(ja=a,b):ja},b._outerRangeBandPadding=function(a){return arguments.length?(ia=a,b):ia},d.override(b,"filter",function(a){return arguments.length?(b._filter(a),b.redrawBrush(a,!1),b):b._filter()}),b.brush=function(a){return arguments.length?(X=a,b):X},b.renderBrush=function(a,c){Y&&(X.on("start brush end",b._brushing),I=a.append("g").attr("class","brush").attr("transform","translate("+b.margins().left+","+b.margins().top+")"),b.setBrushExtents(),b.createBrushHandlePaths(I,c),b.redrawBrush(b.filter(),c))},b.createBrushHandlePaths=function(a){var c=a.selectAll("path."+w).data([{type:"w"},{type:"e"}]);c=c.enter().append("path").attr("class",w).merge(c),c.attr("d",b.resizeHandlePath)},b.extendBrush=function(a){return a&&b.round()&&(a[0]=b.round()(a[0]),a[1]=b.round()(a[1])),a},b.brushIsEmpty=function(a){return!a||a[1]<=a[0]},b._brushing=function(){if(a.event.sourceEvent&&(!a.event.sourceEvent.type||["start","brush","end"].indexOf(a.event.sourceEvent.type)===-1)){var c=a.event.selection;c&&(c=c.map(b.x().invert)),c=b.extendBrush(c),b.redrawBrush(c,!1);var e=b.brushIsEmpty(c)?null:d.filters.RangedFilter(c[0],c[1]);d.events.trigger(function(){b.applyBrushSelection(e)},d.constants.EVENT_DELAY)}},b.applyBrushSelection=function(a){b.replaceFilter(a),b.redrawGroup()},b.setBrushExtents=function(a){X.extent([[0,0],[b.effectiveWidth(),b.effectiveHeight()]]),I.call(X)},b.redrawBrush=function(a,c){if(Y&&I)if(aa&&b.setBrushExtents(c),a){var e=[B(a[0]),B(a[1])],f=d.optionalTransition(c,b.transitionDuration(),b.transitionDelay())(I);f.call(X.move,e),f.selectAll("path."+w).attr("display",null).attr("transform",function(b,c){return"translate("+B(a[c])+", 0)"}).attr("d",b.resizeHandlePath)}else I.call(X.move,null),I.selectAll("path."+w).attr("display","none");b.fadeDeselectedArea(a)},b.fadeDeselectedArea=function(a){},b.resizeHandlePath=function(a){a=a.type;var c=+("e"===a),d=c?1:-1,e=b.effectiveHeight()/3;return"M"+.5*d+","+e+"A6,6 0 0 "+c+" "+6.5*d+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+c+" "+.5*d+","+2*e+"ZM"+2.5*d+","+(e+8)+"V"+(2*e-8)+"M"+4.5*d+","+(e+8)+"V"+(2*e-8)},b.clipPadding=function(a){return arguments.length?(ha=a,b):ha},b._preprocessData=function(){},b._doRender=function(){return b.resetSvg(),b._preprocessData(),b._generateG(),h(),i(!0),j(),b},b._doRedraw=function(){return b._preprocessData(),i(!1),h(),b},b._enableMouseZoom=function(){fa=!0;var a=[[0,0],[b.effectiveWidth(),b.effectiveHeight()]];if(da.scaleExtent(ba).extent(a).duration(b.transitionDuration()),ca){var c=Math.max(ba[0],1);da.translateExtent(a).scaleExtent([c,ba[1]])}b.root().call(da),m()},b._disableMouseZoom=function(){b.root().call(ea)},b.focus=function(a,b){ca&&(a=o(a,D),L&&(a=o(a,L.x().domain()))),k(a,b),m()},b.refocused=function(){return!p(b.x().domain(),D)},b.focusChart=function(a){return arguments.length?(M=a,b.on("filtered",function(a){a.filter()?p(a.filter(),M.filter())||d.events.trigger(function(){M.focus(a.filter(),!0)}):d.events.trigger(function(){M.x().domain(M.xOriginalDomain(),!0)})}),b):M},b.brushOn=function(a){return arguments.length?(Y=a,b):Y},b.parentBrushOn=function(a){return arguments.length?(Z=a,b):Z},b.gBrush=function(){return I},b},d.stackMixin=function(b){function c(a,c){var d=a.accessor||b.valueAccessor();a.name=String(a.name||c);var f=a.group.all().map(function(c,e){return{x:b.keyAccessor()(c,e),y:a.hidden?null:d(c,e),data:c,layer:a.name,hidden:a.hidden}});a.domainValues=f.filter(e()),a.values=b.evadeDomainFilter()?f:a.domainValues}function e(){if(!b.x())return d.utils.constant(!0);var a=b.x().domain();return b.isOrdinal()?function(){return!0}:b.elasticX()?function(){return!0}:function(b){return b.x>=a[0]&&b.x<=a[a.length-1]}}function f(a){var b=j.map(d.pluck("name")).indexOf(a);return j[b]}function g(){var a=b.data().map(function(a){return a.domainValues});return Array.prototype.concat.apply([],a)}function h(a){return!a.hidden}var i=a.stack(),j=[],k={},l=!1,m=!1;return b.stack=function(a,c,d){
if(!arguments.length)return j;arguments.length<=2&&(d=c);var e={group:a};return"string"==typeof c&&(e.name=c),"function"==typeof d&&(e.accessor=d),j.push(e),b},d.override(b,"group",function(a,c,d){return arguments.length?(j=[],k={},b.stack(a,c),d&&b.valueAccessor(d),b._group(a,c)):b._group()}),b.hidableStacks=function(a){return arguments.length?(l=a,b):l},b.hideStack=function(a){var c=f(a);return c&&(c.hidden=!0),b},b.showStack=function(a){var c=f(a);return c&&(c.hidden=!1),b},b.getValueAccessorByIndex=function(a){return j[a].accessor||b.valueAccessor()},b.yAxisMin=function(){var c=a.min(g(),function(a){return a.y<0?a.y+a.y0:a.y0});return d.utils.subtract(c,b.yAxisPadding())},b.yAxisMax=function(){var c=a.max(g(),function(a){return a.y>0?a.y+a.y0:a.y0});return d.utils.add(c,b.yAxisPadding())},b.xAxisMin=function(){var c=a.min(g(),d.pluck("x"));return d.utils.subtract(c,b.xAxisPadding(),b.xAxisPaddingUnit())},b.xAxisMax=function(){var c=a.max(g(),d.pluck("x"));return d.utils.add(c,b.xAxisPadding(),b.xAxisPaddingUnit())},d.override(b,"title",function(a,c){return a?"function"==typeof a?b._title(a):a===b._groupName&&"function"==typeof c?b._title(c):"function"!=typeof c?k[a]||b._title():(k[a]=c,b):b._title()}),b.stackLayout=function(a){return arguments.length?(i=a,b):i},b.evadeDomainFilter=function(a){return arguments.length?(m=a,b):m},b.data(function(){var a=j.filter(h);if(!a.length)return[];a.forEach(c);var d=a[0].values.map(function(b,c){var d={x:b.x};return a.forEach(function(a){d[a.name]=a.values[c].y}),d}),e=a.map(function(a){return a.name}),f=b.stackLayout().keys(e)(d);return f.forEach(function(b,c){b.forEach(function(b,d){a[c].values[d].y0=b[0],a[c].values[d].y1=b[1]})}),a}),b._ordinalXDomain=function(){var a=g().map(d.pluck("data")),c=b._computeOrderedGroups(a);return c.map(b.keyAccessor())},b.colorAccessor(function(a){var b=this.layer||this.name||a.name||a.layer;return b}),b.legendables=function(){return j.map(function(a,c){return{chart:b,name:a.name,hidden:a.hidden||!1,color:b.getColor.call(a,a.values,c)}})},b.isLegendableHidden=function(a){var b=f(a.name);return!!b&&b.hidden},b.legendToggle=function(a){l&&(b.isLegendableHidden(a)?b.showStack(a.name):b.hideStack(a.name),b.renderGroup())},b},d.capMixin=function(b){var c=1/0,e=!0,f="Others";b.ordering(function(a){return-a.value});var g=function(c,d){var e=a.sum(d,b.valueAccessor()),f=d.map(b.keyAccessor());return e>0?c.concat([{others:f,key:b.othersLabel(),value:e}]):c};return b.cappedKeyAccessor=function(a,c){return a.others?a.key:b.keyAccessor()(a,c)},b.cappedValueAccessor=function(a,c){return a.others?a.value:b.valueAccessor()(a,c)},b.data(function(a){if(c===1/0)return b._computeOrderedGroups(a.all());var d,f=a.all();if(f=b._computeOrderedGroups(f),c)if(e)d=f.slice(c),f=f.slice(0,c);else{var h=Math.max(0,f.length-c);d=f.slice(0,h),f=f.slice(h)}return g?g(f,d):f}),b.cap=function(a){return arguments.length?(c=a,b):c},b.takeFront=function(a){return arguments.length?(e=a,b):e},b.othersLabel=function(a){return arguments.length?(f=a,b):f},b.othersGrouper=function(a){return arguments.length?(g=a,b):g},d.override(b,"onClick",function(a){a.others&&b.filter([a.others]),b._onClick(a)}),b},d.bubbleMixin=function(b){var c=.3,e=10,f=!1,g=!1;b.BUBBLE_NODE_CLASS="node",b.BUBBLE_CLASS="bubble",b.MIN_RADIUS=10,b=d.colorMixin(b),b.renderLabel(!0),b.data(function(c){var d=c.all();if(f){var e=b.radiusValueAccessor();d.sort(function(b,c){return a.descending(e(b),e(c))})}return d});var h=a.scaleLinear().domain([0,100]),i=function(a){return a.r};b.r=function(a){return arguments.length?(h=a,b):h},b.elasticRadius=function(a){return arguments.length?(g=a,b):g},b.calculateRadiusDomain=function(){g&&b.r().domain([b.rMin(),b.rMax()])},b.radiusValueAccessor=function(a){return arguments.length?(i=a,b):i},b.rMin=function(){var c=a.min(b.data(),function(a){return b.radiusValueAccessor()(a)});return c},b.rMax=function(){var c=a.max(b.data(),function(a){return b.radiusValueAccessor()(a)});return c},b.bubbleR=function(a){var c=b.radiusValueAccessor()(a),d=b.r()(c);return(isNaN(d)||c<=0)&&(d=0),d};var j=function(a){return b.label()(a)},k=function(a){return b.bubbleR(a)>e},l=function(a){return k(a)?1:0},m=function(a){return k(a)?"all":"none"};b._doRenderLabel=function(a){if(b.renderLabel()){var c=a.select("text");c.empty()&&(c=a.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",b.onClick)),c.attr("opacity",0).attr("pointer-events",m).text(j),d.transition(c,b.transitionDuration(),b.transitionDelay()).attr("opacity",l)}},b.doUpdateLabels=function(a){if(b.renderLabel()){var c=a.select("text").attr("pointer-events",m).text(j);d.transition(c,b.transitionDuration(),b.transitionDelay()).attr("opacity",l)}};var n=function(a){return b.title()(a)};return b._doRenderTitles=function(a){if(b.renderTitle()){var c=a.select("title");c.empty()&&a.append("title").text(n)}},b.doUpdateTitles=function(a){b.renderTitle()&&a.select("title").text(n)},b.sortBubbleSize=function(a){return arguments.length?(f=a,b):f},b.minRadius=function(a){return arguments.length?(b.MIN_RADIUS=a,b):b.MIN_RADIUS},b.minRadiusWithLabel=function(a){return arguments.length?(e=a,b):e},b.maxBubbleRelativeSize=function(a){return arguments.length?(c=a,b):c},b.fadeDeselectedArea=function(a){b.hasFilter()?b.selectAll("g."+b.BUBBLE_NODE_CLASS).each(function(a){b.isSelectedNode(a)?b.highlightSelected(this):b.fadeDeselected(this)}):b.selectAll("g."+b.BUBBLE_NODE_CLASS).each(function(){b.resetHighlight(this)})},b.isSelectedNode=function(a){return b.hasFilter(a.key)},b.onClick=function(a){var c=a.key;d.events.trigger(function(){b.filter(c),b.redrawGroup()})},b},d.pieChart=function(b,c){function e(){var b=a.min([W.width(),W.height()])/2;F=G&&G<b?G:b;var c,e=t(),g=v();if(a.sum(W.data(),W.valueAccessor())?(c=g(W.data()),H.classed(Q,!1)):(c=g([{key:R,value:1,others:[R]}]),H.classed(Q,!0)),H){var h=H.select("g."+O).selectAll("g."+M).data(c),i=H.select("g."+P).selectAll("text."+N).data(c);r(h,i),f(h,i,e,c),n(c,e),s(),d.transition(H,W.transitionDuration(),W.transitionDelay()).attr("transform","translate("+W.cx()+","+W.cy()+")")}}function f(a,b,c,d){var e=g(a);h(e,c),i(e),l(b,d,c)}function g(a){var b=a.enter().append("g").attr("class",function(a,b){return M+" _"+b});return b}function h(a,b){var c=a.append("path").attr("fill",A).on("click",B).attr("d",function(a,c){return C(a,c,b)}),e=d.transition(c,W.transitionDuration(),W.transitionDelay());e.attrTween&&e.attrTween("d",y)}function i(a){W.renderTitle()&&a.append("title").text(function(a){return W.title()(a.data)})}function j(a,b){W._applyLabelText(a),d.transition(a,W.transitionDuration(),W.transitionDelay()).attr("transform",function(a){return D(a,b)}).attr("text-anchor","middle")}function k(a,b){W.select("g.pie-slice._"+a).classed("highlight",b)}function l(a,b,c){if(W.renderLabel()){var d=a.enter().append("text").attr("class",function(a,b){var c=M+" "+N+" _"+b;return K&&(c+=" external"),c}).on("click",B).on("mouseover",function(a,b){k(b,!0)}).on("mouseout",function(a,b){k(b,!1)});j(d,c),K&&V&&m(b,c)}}function m(b,c){var e=H.selectAll("polyline."+M).data(b);e.exit().remove(),e=e.enter().append("polyline").attr("class",function(a,b){return"pie-path _"+b+" "+M}).on("click",B).on("mouseover",function(a,b){k(b,!0)}).on("mouseout",function(a,b){k(b,!1)}).merge(e);var f=a.arc().outerRadius(F-T+K).innerRadius(F-T),g=d.transition(e,W.transitionDuration(),W.transitionDelay());g.attrTween?g.attrTween("points",function(b){var d=this._current||b;d={startAngle:d.startAngle,endAngle:d.endAngle};var e=a.interpolate(d,b);return this._current=e(0),function(a){var b=e(a);return[c.centroid(b),f.centroid(b)]}}):g.attr("points",function(a){return[c.centroid(a),f.centroid(a)]}),g.style("visibility",function(a){return a.endAngle-a.startAngle<1e-4?"hidden":"visible"})}function n(a,b){o(a,b),p(a,b),q(a)}function o(a,b){var c=H.selectAll("g."+M).data(a).select("path").attr("d",function(a,c){return C(a,c,b)}),e=d.transition(c,W.transitionDuration(),W.transitionDelay());e.attrTween&&e.attrTween("d",y),e.attr("fill",A)}function p(a,b){if(W.renderLabel()){var c=H.selectAll("text."+N).data(a);j(c,b),K&&V&&m(a,b)}}function q(a){W.renderTitle()&&H.selectAll("g."+M).data(a).select("title").text(function(a){return W.title()(a.data)})}function r(a,b){a.exit().remove(),b.exit().remove()}function s(){W.hasFilter()?W.selectAll("g."+M).each(function(a){u(a)?W.highlightSelected(this):W.fadeDeselected(this)}):W.selectAll("g."+M).each(function(){W.resetHighlight(this)})}function t(){return a.arc().outerRadius(F-T).innerRadius(S)}function u(a){return W.hasFilter(W.cappedKeyAccessor(a.data))}function v(){return a.pie().sort(null).value(W.cappedValueAccessor)}function w(a){var b=a.endAngle-a.startAngle;return isNaN(b)||b<U}function x(a){return 0===W.cappedValueAccessor(a)}function y(b){b.innerRadius=S;var c=this._current;c=z(c)?{startAngle:0,endAngle:0}:{startAngle:c.startAngle,endAngle:c.endAngle};var d=a.interpolate(c,b);return this._current=d(0),function(a){return C(d(a),0,t())}}function z(a){return!a||isNaN(a.startAngle)||isNaN(a.endAngle)}function A(a,b){return W.getColor(a.data,b)}function B(a,b){H.attr("class")!==Q&&W.onClick(a.data,b)}function C(a,b,c){var d=c(a,b);return d.indexOf("NaN")>=0&&(d="M0,0"),d}function D(b,c){var d;return d=K?a.arc().outerRadius(F-T+K).innerRadius(F-T+K).centroid(b):c.centroid(b),isNaN(d[0])||isNaN(d[1])?"translate(0,0)":"translate("+d+")"}function E(b,c){W.selectAll("g.pie-slice").each(function(d){b.name===d.data.key&&a.select(this).classed("highlight",c)})}var F,G,H,I,J,K,L=.5,M="pie-slice",N="pie-label",O="pie-slice-group",P="pie-label-group",Q="empty-chart",R="empty",S=0,T=0,U=L,V=!1,W=d.capMixin(d.colorMixin(d.baseMixin({})));return W.colorAccessor(W.cappedKeyAccessor),W.title(function(a){return W.cappedKeyAccessor(a)+": "+W.cappedValueAccessor(a)}),W.slicesCap=W.cap,W.label(W.cappedKeyAccessor),W.renderLabel(!0),W.transitionDuration(350),W.transitionDelay(0),W._doRender=function(){return W.resetSvg(),H=W.svg().append("g").attr("transform","translate("+W.cx()+","+W.cy()+")"),H.append("g").attr("class",O),H.append("g").attr("class",P),e(),W},W._applyLabelText=function(a){a.text(function(a){var b=a.data;return!x(b)&&!w(a)||u(a)?W.label()(a.data):""})},W.externalRadiusPadding=function(a){return arguments.length?(T=a,W):T},W.innerRadius=function(a){return arguments.length?(S=a,W):S},W.radius=function(a){return arguments.length?(G=a,W):G},W.cx=function(a){return arguments.length?(I=a,W):I||W.width()/2},W.cy=function(a){return arguments.length?(J=a,W):J||W.height()/2},W._doRedraw=function(){return e(),W},W.minAngleForLabel=function(a){return arguments.length?(U=a,W):U},W.emptyTitle=function(a){return 0===arguments.length?R:(R=a,W)},W.externalLabels=function(a){return 0===arguments.length?K:(K=a?a:void 0,W)},W.drawPaths=function(a){return 0===arguments.length?V:(V=a,W)},W.legendables=function(){return W.data().map(function(a,b){var c={name:a.key,data:a.value,others:a.others,chart:W};return c.color=W.getColor(a,b),c})},W.legendHighlight=function(a){E(a,!0)},W.legendReset=function(a){E(a,!1)},W.legendToggle=function(a){W.onClick({key:a.name,others:a.others})},W.anchor(b,c)},d.sunburstChart=function(b,c){function e(){G=G?G:a.min([R.width(),R.height()])/2;var b,c,e=r();if(a.sum(R.data(),R.valueAccessor())?(c=d.utils.toHierarchy(R.data(),R.valueAccessor()),b=v(c),b.shift(),H.classed(N,!1)):(c=d.utils.toHierarchy([],function(a){return a.value}),b=v(c),H.classed(N,!0)),H){var g=H.selectAll("g."+M).data(b);f(g,e,b),l(b,e),p(g),q()}}function f(a,b,c){var d=g(a);h(d,b),i(d),k(c,b)}function g(a){var b=a.enter().append("g").attr("class",function(a,b){return M+" _"+b+" "+M+"-level-"+a.depth});return b}function h(a,b){var c=a.append("path").attr("fill",A).on("click",C).attr("d",function(a,c){return D(a,c,b)}),e=d.transition(c,R.transitionDuration());e.attrTween&&e.attrTween("d",y)}function i(a){R.renderTitle()&&a.append("title").text(function(a){return R.title()(a)})}function j(a,b){d.transition(a,R.transitionDuration()).attr("transform",function(a){return E(a,b)}).attr("text-anchor","middle").text(function(a){return x(a)||w(a)?"":R.label()(a)})}function k(a,b){if(R.renderLabel()){var c=H.selectAll("text."+M).data(a);c.exit().remove();var d=c.enter().append("text").attr("class",function(a,b){var c=M+" _"+b;return K&&(c+=" external"),c}).on("click",C);j(d,b)}}function l(a,b){m(a,b),n(a,b),o(a)}function m(a,b){var c=H.selectAll("g."+M).data(a).select("path").attr("d",function(a,c){return D(a,c,b)}),e=d.transition(c,R.transitionDuration());e.attrTween&&e.attrTween("d",y),e.attr("fill",A)}function n(a,b){if(R.renderLabel()){var c=H.selectAll("text."+M).data(a);j(c,b)}}function o(a){R.renderTitle()&&H.selectAll("g."+M).data(a).select("title").text(function(a){return R.title()(a)})}function p(a){a.exit().remove()}function q(){R.hasFilter()?R.selectAll("g."+M).each(function(a){s(a)?R.highlightSelected(this):R.fadeDeselected(this)}):R.selectAll("g."+M).each(function(a){R.resetHighlight(this)})}function r(){return a.arc().startAngle(function(a){return a.x0}).endAngle(function(a){return a.x1}).innerRadius(function(a){return a.data.path&&1===a.data.path.length?P:Math.sqrt(a.y0)}).outerRadius(function(a){return Math.sqrt(a.y1)})}function s(a){return t(a.path)}function t(a){for(var b=0;b<R.filters().length;b++){var c=R.filters()[b];if(c.isFiltered(a))return!0}return!1}function u(a){for(var b=d.filters.HierarchyFilter(a),c=[],e=0;e<R.filters().length;e++){var f=R.filters()[e];(f.isFiltered(a)||b.isFiltered(f))&&c.push(f)}return c}function v(b){var c=a.hierarchy(b).sum(function(a){return a.children?0:R.cappedValueAccessor(a)}).sort(function(b,c){return a.ascending(b.data.path,c.data.path)}),d=a.partition().size([2*Math.PI,G*G]);d(c);var e=c.descendants().map(function(a){return a.key=a.data.key,a.path=a.data.path,a});return e}function w(a){var b=a.x1-a.x0;return isNaN(b)||b<Q}function x(a){return 0===R.cappedValueAccessor(a)}function y(b){b.innerRadius=P;var c=this._current;z(c)&&(c={x:0,y:0,dx:0,dy:0});var d={x:b.x,y:b.y,dx:b.dx,dy:b.dy},e=a.interpolate(c,d);return this._current=e(0),function(a){return D(Object.assign({},b,e(a)),0,r())}}function z(a){return!a||isNaN(a.dx)||isNaN(a.dy)}function A(a,b){return R.getColor(a,b)}function B(a){for(var b=a.path||a.key,c=d.filters.HierarchyFilter(b),e=u(b),f=!1,g=e.length-1;g>=0;g--){var h=e[g];d.utils.arraysIdentical(h,b)&&(f=!0),R.filter(e[g])}d.events.trigger(function(){f||R.filter(c),R.redrawGroup()})}function C(a,b){H.attr("class")!==N&&B(a,b)}function D(a,b,c){var d=c(a,b);return d.indexOf("NaN")>=0&&(d="M0,0"),d}function E(b,c){var d;return d=K?a.svg.arc().outerRadius(G+K).innerRadius(G+K).centroid(b):c.centroid(b),isNaN(d[0])||isNaN(d[1])?"translate(0,0)":"translate("+d+")"}function F(b,c){R.selectAll("g.pie-slice").each(function(d){b.name===d.key&&a.select(this).classed("highlight",c)})}var G,H,I,J,K,L=.5,M="pie-slice",N="empty-chart",O="empty",P=0,Q=L,R=d.capMixin(d.colorMixin(d.baseMixin({})));return R.colorAccessor(R.cappedKeyAccessor),R.title(function(a){return R.cappedKeyAccessor(a)+": "+R.cappedValueAccessor(a)}),R.label(R.cappedKeyAccessor),R.renderLabel(!0),R.transitionDuration(350),R.filterHandler(function(a,b){return 0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0}return!1}),b}),R._doRender=function(){return R.resetSvg(),H=R.svg().append("g").attr("transform","translate("+R.cx()+","+R.cy()+")"),e(),R},R.innerRadius=function(a){return arguments.length?(P=a,R):P},R.radius=function(a){return arguments.length?(G=a,R):G},R.cx=function(a){return arguments.length?(I=a,R):I||R.width()/2},R.cy=function(a){return arguments.length?(J=a,R):J||R.height()/2},R.minAngleForLabel=function(a){return arguments.length?(Q=a,R):Q},R.emptyTitle=function(a){return 0===arguments.length?O:(O=a,R)},R.externalLabels=function(a){return 0===arguments.length?K:(K=a?a:void 0,R)},R._doRedraw=function(){return e(),R},R.onClick=C,R.legendables=function(){return R.data().map(function(a,b){var c={name:a.key,data:a.value,others:a.others,chart:R};return c.color=R.getColor(a,b),c})},R.legendHighlight=function(a){F(a,!0)},R.legendReset=function(a){F(a,!1)},R.legendToggle=function(a){R.onClick({key:a.name,others:a.others})},R.anchor(b,c)},d.barChart=function(b,c){function e(a){return d.utils.safeNumber(Math.abs(q.y()(a.y+a.y0)-q.y()(a.y0)))}function f(a){var b=q.x()(a.x);return s||(b+=m/2),q.isOrdinal()&&void 0!==r&&(b+=r/2),d.utils.safeNumber(b)}function g(a){var b=q.y()(a.y+a.y0);return a.y<0&&(b-=e(a)),d.utils.safeNumber(b-p)}function h(a,b,c){var e=a.selectAll("text.barLabel").data(c.values,d.pluck("x")),h=e.enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",f).attr("y",g).merge(e);q.isOrdinal()&&(h.on("click",q.onClick),h.attr("cursor","pointer")),d.transition(h,q.transitionDuration(),q.transitionDelay()).attr("x",f).attr("y",g).text(function(a){return q.label()(a)}),d.transition(e.exit(),q.transitionDuration(),q.transitionDelay()).attr("height",0).remove()}function i(a){var b=q.x()(a.x);return s&&(b-=m/2),q.isOrdinal()&&void 0!==r&&(b+=r/2),d.utils.safeNumber(b)}function j(a,b,c){var f=a.selectAll("rect.bar").data(c.values,d.pluck("x")),g=f.enter().append("rect").attr("class","bar").attr("fill",d.pluck("data",q.getColor)).attr("x",i).attr("y",q.yAxisHeight()).attr("height",0),h=g.merge(f);q.renderTitle()&&g.append("title").text(d.pluck("data",q.title(c.name))),q.isOrdinal()&&h.on("click",q.onClick),d.transition(h,q.transitionDuration(),q.transitionDelay()).attr("x",i).attr("y",function(a){var b=q.y()(a.y+a.y0);return a.y<0&&(b-=e(a)),d.utils.safeNumber(b)}).attr("width",m).attr("height",function(a){return e(a)}).attr("fill",d.pluck("data",q.getColor)).select("title").text(d.pluck("data",q.title(c.name))),d.transition(f.exit(),q.transitionDuration(),q.transitionDelay()).attr("x",function(a){return q.x()(a.x)}).attr("width",.9*m).remove()}function k(){if(void 0===m){var a=q.xUnitCount();m=q.isOrdinal()&&void 0===r?Math.floor(q.x().bandwidth()):r?Math.floor((q.xAxisLength()-(a-1)*r)/a):Math.floor(q.xAxisLength()/(1+q.barPadding())/a),(m===1/0||isNaN(m)||m<n)&&(m=n)}}function l(b,c){return function(){var d=a.select(this),e=d.attr("fill")===b;return c?!e:e}}var m,n=1,o=2,p=3,q=d.stackMixin(d.coordinateGridMixin({})),r=o,s=!1,t=!1;return d.override(q,"rescale",function(){return q._rescale(),m=void 0,q}),d.override(q,"render",function(){return q.round()&&s&&!t&&d.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),q._render()}),q.label(function(a){return d.utils.printSingleValue(a.y0+a.y)},!1),q.plotData=function(){var b=q.chartBodyG().selectAll("g.stack").data(q.data());k(),b=b.enter().append("g").attr("class",function(a,b){return"stack _"+b}).merge(b);var c=b.size()-1;b.each(function(b,d){var e=a.select(this);j(e,d,b),q.renderLabel()&&c===d&&h(e,d,b)})},q.fadeDeselectedArea=function(a){var b=q.chartBodyG().selectAll("rect.bar");if(q.isOrdinal())q.hasFilter()?(b.classed(d.constants.SELECTED_CLASS,function(a){return q.hasFilter(a.x)}),b.classed(d.constants.DESELECTED_CLASS,function(a){return!q.hasFilter(a.x)})):(b.classed(d.constants.SELECTED_CLASS,!1),b.classed(d.constants.DESELECTED_CLASS,!1));else if(q.brushOn()||q.parentBrushOn())if(q.brushIsEmpty(a))b.classed(d.constants.DESELECTED_CLASS,!1);else{var c=a[0],e=a[1];b.classed(d.constants.DESELECTED_CLASS,function(a){return a.x<c||a.x>=e})}},q.centerBar=function(a){return arguments.length?(s=a,q):s},d.override(q,"onClick",function(a){q._onClick(a.data)}),q.barPadding=function(a){return arguments.length?(q._rangeBandPadding(a),r=void 0,q):q._rangeBandPadding()},q._useOuterPadding=function(){return void 0===r},q.outerPadding=q._outerRangeBandPadding,q.gap=function(a){return arguments.length?(r=a,q):r},q.extendBrush=function(a){return a&&q.round()&&(!s||t)&&(a[0]=q.round()(a[0]),a[1]=q.round()(a[1])),a},q.alwaysUseRounding=function(a){return arguments.length?(t=a,q):t},q.legendHighlight=function(a){q.isLegendableHidden(a)||q.g().selectAll("rect.bar").classed("highlight",l(a.color)).classed("fadeout",l(a.color,!0))},q.legendReset=function(){q.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},d.override(q,"xAxisMax",function(){var a=this._xAxisMax();if("resolution"in q.xUnits()){var b=q.xUnits().resolution;a+=b}return a}),q.anchor(b,c)},d.lineChart=function(b,c){function e(a,b){return C.getColor.call(a,a.values,b)}function f(){var b=null;if(I)return I;if("function"==typeof J)b=J;else{var c={linear:a.curveLinear,"linear-closed":a.curveLinearClosed,step:a.curveStep,"step-before":a.curveStepBefore,"step-after":a.curveStepAfter,basis:a.curveBasis,"basis-open":a.curveBasisOpen,"basis-closed":a.curveBasisClosed,bundle:a.curveBundle,cardinal:a.curveCardinal,"cardinal-open":a.curveCardinalOpen,"cardinal-closed":a.curveCardinalClosed,monotone:a.curveMonotoneX};b=c[J]}return b||(b=a.curveLinear),null!==K&&("function"!=typeof b.tension?d.logger.warn("tension was specified but the curve/interpolate does not support it."):b=b.tension(K)),b}function g(b,c){var g=a.line().x(function(a){return C.x()(a.x)}).y(function(a){return C.y()(a.y+a.y0)}).curve(f());t&&g.defined(t);var h=b.append("path").attr("class","line").attr("stroke",e);u&&h.attr("stroke-dasharray",u),d.transition(c.select("path.line"),C.transitionDuration(),C.transitionDelay()).attr("stroke",e).attr("d",function(a){return i(g(a.values))})}function h(b,c){if(D){var g=a.area().x(function(a){return C.x()(a.x)}).y1(function(a){return C.y()(a.y+a.y0)}).y0(function(a){return C.y()(a.y0)}).curve(f());t&&g.defined(t),b.append("path").attr("class","area").attr("fill",e).attr("d",function(a){return i(g(a.values))}),d.transition(c.select("path.area"),C.transitionDuration(),C.transitionDelay()).attr("fill",e).attr("d",function(a){return i(g(a.values))})}}function i(a){return!a||a.indexOf("NaN")>=0?"M0,0":a}function j(b,c){if("always"===C.xyTipsOn()||!C.brushOn()&&!C.parentBrushOn()&&C.xyTipsOn()){var e=w+"-list",f=b.select("g."+e);f.empty()&&(f=b.append("g").attr("class",e)),c.each(function(b,c){var e=b.values;t&&(e=e.filter(t));var g=f.select("g."+w+"._"+c);g.empty()&&(g=f.append("g").attr("class",w+" _"+c)),l(g);var h=g.selectAll("circle."+x).data(e,d.pluck("x")),i=h.enter().append("circle").attr("class",x).attr("cx",function(a){return d.utils.safeNumber(C.x()(a.x))}).attr("cy",function(a){return d.utils.safeNumber(C.y()(a.y+a.y0))}).attr("r",o()).style("fill-opacity",G).style("stroke-opacity",H).attr("fill",C.getColor).on("mousemove",function(){var b=a.select(this);m(b),n(b,g)}).on("mouseout",function(){var b=a.select(this);p(b),q(g)}).merge(h);i.call(r,b),d.transition(i,C.transitionDuration()).attr("cx",function(a){return d.utils.safeNumber(C.x()(a.x))}).attr("cy",function(a){return d.utils.safeNumber(C.y()(a.y+a.y0))}).attr("fill",C.getColor),h.exit().remove()})}}function k(b){b.each(function(b,c){var e=a.select(this),f=e.selectAll("text.lineLabel").data(b.values,d.pluck("x")),g=f.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle").merge(f);d.transition(g,C.transitionDuration()).attr("x",function(a){return d.utils.safeNumber(C.x()(a.x))}).attr("y",function(a){var b=C.y()(a.y+a.y0)-B;return d.utils.safeNumber(b)}).text(function(a){return C.label()(a)}),d.transition(f.exit(),C.transitionDuration()).attr("height",0).remove()})}function l(a){var b=a.select("path."+y).empty()?a.append("path").attr("class",y):a.select("path."+y);b.style("display","none").attr("stroke-dasharray","5,5");var c=a.select("path."+z).empty()?a.append("path").attr("class",z):a.select("path."+z);c.style("display","none").attr("stroke-dasharray","5,5")}function m(a){return a.style("fill-opacity",.8),a.style("stroke-opacity",.8),a.attr("r",E),a}function n(a,b){var c=a.attr("cx"),d=a.attr("cy"),e=C._yAxisX()-C.margins().left,f="M"+e+" "+d+"L"+c+" "+d,g="M"+c+" "+C.yAxisHeight()+"L"+c+" "+d;b.select("path."+y).style("display","").attr("d",f),b.select("path."+z).style("display","").attr("d",g)}function o(){return F||E}function p(a){a.style("fill-opacity",G).style("stroke-opacity",H).attr("r",o())}function q(a){a.select("path."+y).style("display","none"),a.select("path."+z).style("display","none")}function r(a,b){C.renderTitle()&&(a.select("title").remove(),a.append("title").text(d.pluck("data",C.title(b.name))))}function s(b,c,d){return function(){var e=a.select(this),f=e.attr("stroke")===b&&e.attr("stroke-dasharray")===(c instanceof Array?c.join(","):null)||e.attr("fill")===b;return d?!f:f}}var t,u,v=5,w="dc-tooltip",x="dot",y="yRef",z="xRef",A=1e-6,B=3,C=d.stackMixin(d.coordinateGridMixin({})),D=!1,E=v,F=null,G=A,H=A,I=null,J=null,K=null,L=!0;return C.transitionDuration(500),C.transitionDelay(0),C._rangeBandPadding(1),C.plotData=function(){var a=C.chartBodyG(),b=a.select("g.stack-list");b.empty()&&(b=a.append("g").attr("class","stack-list"));var c=b.selectAll("g.stack").data(C.data()),d=c.enter().append("g").attr("class",function(a,b){return"stack _"+b});c=d.merge(c),g(d,c),h(d,c),j(a,c),C.renderLabel()&&k(c)},C.curve=function(a){return arguments.length?(I=a,C):I},C.interpolate=d.logger.deprecate(function(a){return arguments.length?(J=a,C):J},"dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead"),C.tension=d.logger.deprecate(function(a){return arguments.length?(K=a,C):K},"dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead"),C.defined=function(a){return arguments.length?(t=a,C):t},C.dashStyle=function(a){return arguments.length?(u=a,C):u},C.renderArea=function(a){return arguments.length?(D=a,C):D},C.label(function(a){return d.utils.printSingleValue(a.y0+a.y)},!1),C.xyTipsOn=function(a){return arguments.length?(L=a,C):L},C.dotRadius=function(a){return arguments.length?(E=a,C):E},C.renderDataPoints=function(a){return arguments.length?(a?(G=a.fillOpacity||.8,H=a.strokeOpacity||.8,F=a.radius||2):(G=A,H=A,F=null),C):{fillOpacity:G,strokeOpacity:H,radius:F}},C.legendHighlight=function(a){C.isLegendableHidden(a)||C.g().selectAll("path.line, path.area").classed("highlight",s(a.color,a.dashstyle)).classed("fadeout",s(a.color,a.dashstyle,!0))},C.legendReset=function(){C.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},d.override(C,"legendables",function(){var a=C._legendables();return u?a.map(function(a){return a.dashstyle=u,a}):a}),C.anchor(b,c)},d.dataCount=function(b,c){var e=a.format(",d"),f=d.baseMixin({}),g={some:"",all:""};return f.html=function(a){return arguments.length?(a.all&&(g.all=a.all),a.some&&(g.some=a.some),f):g},f.formatNumber=function(a){return arguments.length?(e=a,f):e},f._doRender=function(){var a=f.dimension().size(),b=f.group().value(),c=e(a),d=e(b);return a===b&&""!==g.all?f.root().html(g.all.replace("%total-count",c).replace("%filter-count",d)):""!==g.some?f.root().html(g.some.replace("%total-count",c).replace("%filter-count",d)):(f.selectAll(".total-count").text(c),f.selectAll(".filter-count").text(d)),f},f._doRedraw=function(){return f._doRender()},f.anchor(b,c)},d.dataTable=function(b,c){function e(){var a=!0;if(p.forEach(function(b){a&="function"==typeof b}),!a){var b=n.selectAll("thead").data([0]);b.exit().remove(),b=b.enter().append("thead").merge(b);var c=b.selectAll("tr").data([0]);c.exit().remove(),c=c.enter().append("tr").merge(c);var d=c.selectAll("th").data(p);d.exit().remove(),d.enter().append("th").merge(d).attr("class",m).html(function(a){return n._doColumnHeaderFormat(a)})}var e=n.root().selectAll("tbody").data(f(),function(a){return n.keyAccessor()(a)}),g=e.enter().append("tbody");return t===!0&&g.append("tr").attr("class",l).append("td").attr("class",i).attr("colspan",p.length).html(function(a){return n.keyAccessor()(a)}),e.exit().remove(),g}function f(){var b;return b=r===a.ascending?n.dimension().bottom(o):n.dimension().top(o),a.nest().key(n.group()).sortKeys(r).entries(b.sort(function(a,b){return r(q(a),q(b))}).slice(s,h))}function g(a){var b=a.order().selectAll("tr."+j).data(function(a){return a.values}),c=b.enter().append("tr").attr("class",j);return p.forEach(function(a,b){c.append("td").attr("class",k+" _"+b).html(function(b){return n._doColumnValueFormat(a,b)})}),b.exit().remove(),b}var h,i="dc-table-label",j="dc-table-row",k="dc-table-column",l="dc-table-group",m="dc-table-head",n=d.baseMixin({}),o=25,p=[],q=function(a){return a},r=a.ascending,s=0,t=!0;return n._doRender=function(){return n.selectAll("tbody").remove(),g(e()),n},n._doColumnValueFormat=function(a,b){return"function"==typeof a?a(b):"string"==typeof a?b[a]:a.format(b)},n._doColumnHeaderFormat=function(a){return"function"==typeof a?n._doColumnHeaderFnToString(a):"string"==typeof a?n._doColumnHeaderCapitalize(a):String(a.label)},n._doColumnHeaderCapitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},n._doColumnHeaderFnToString=function(a){var b=String(a),c=b.indexOf("return ");if(c>=0){var d=b.lastIndexOf(";");if(d>=0){b=b.substring(c+7,d);var e=b.indexOf("numberFormat");e>=0&&(b=b.replace("numberFormat",""))}}return b},n._doRedraw=function(){return n._doRender()},n.size=function(a){return arguments.length?(o=a,n):o},n.beginSlice=function(a){return arguments.length?(s=a,n):s},n.endSlice=function(a){return arguments.length?(h=a,n):h},n.columns=function(a){return arguments.length?(p=a,n):p},n.sortBy=function(a){return arguments.length?(q=a,n):q},n.order=function(a){return arguments.length?(r=a,n):r},n.showGroups=function(a){return arguments.length?(t=a,n):t},n.anchor(b,c)},d.dataGrid=function(b,c){function e(){var a=m.root().selectAll("div."+l).data(f(),function(a){return m.keyAccessor()(a)}),b=a.enter().append("div").attr("class",l);return s&&b.html(function(a){return s(a)}),a.exit().remove(),b}function f(){var b=m.dimension().top(n);return a.nest().key(m.group()).sortKeys(q).entries(b.sort(function(a,b){return q(p(a),p(b))}).slice(r,h))}function g(a){var b=a.order().selectAll("div."+j).data(function(a){return a.values});return b.exit().remove(),b=b.enter().append("div").attr("class",j).html(function(a){return o(a)}).merge(b)}var h,i="dc-grid-label",j="dc-grid-item",k="dc-grid-group",l="dc-grid-top",m=d.baseMixin({}),n=999,o=function(a){return"you need to provide an html() handling param:  "+JSON.stringify(a)},p=function(a){return a},q=a.ascending,r=0,s=function(a){return"<div class='"+k+"'><h1 class='"+i+"'>"+m.keyAccessor()(a)+"</h1></div>"};return m._doRender=function(){return m.selectAll("div."+l).remove(),g(e()),m},m._doRedraw=function(){return m._doRender()},m.beginSlice=function(a){return arguments.length?(r=a,m):r},m.endSlice=function(a){return arguments.length?(h=a,m):h},m.size=function(a){return arguments.length?(n=a,m):n},m.html=function(a){return arguments.length?(o=a,m):o},m.htmlGroup=function(a){return arguments.length?(s=a,m):s},m.sortBy=function(a){return arguments.length?(p=a,m):p},m.order=function(a){return arguments.length?(q=a,m):q},m.anchor(b,c)},d.bubbleChart=function(a,b){function c(a){var b=a.enter().append("g");return b.attr("class",i.BUBBLE_NODE_CLASS).attr("transform",j).append("circle").attr("class",function(a,b){return i.BUBBLE_CLASS+" _"+b}).on("click",i.onClick).attr("fill",i.getColor).attr("r",0),a=b.merge(a),d.transition(a,i.transitionDuration(),i.transitionDelay()).select("circle."+i.BUBBLE_CLASS).attr("r",function(a){return i.bubbleR(a)}).attr("opacity",function(a){return i.bubbleR(a)>0?1:0}),i._doRenderLabel(b),i._doRenderTitles(b),a}function e(a){d.transition(a,i.transitionDuration(),i.transitionDelay()).attr("transform",j).select("circle."+i.BUBBLE_CLASS).attr("fill",i.getColor).attr("r",function(a){return i.bubbleR(a)}).attr("opacity",function(a){return i.bubbleR(a)>0?1:0}),i.doUpdateLabels(a),i.doUpdateTitles(a)}function f(a){a.exit().remove()}function g(a){var b=i.x()(i.keyAccessor()(a));return!isNaN(b)&&isFinite(b)||(b=0),
b}function h(a){var b=i.y()(i.valueAccessor()(a));return!isNaN(b)&&isFinite(b)||(b=0),b}var i=d.bubbleMixin(d.coordinateGridMixin({}));i.transitionDuration(750),i.transitionDelay(0);var j=function(a){return"translate("+g(a)+","+h(a)+")"};return i.plotData=function(){i.calculateRadiusDomain(),i.r().range([i.MIN_RADIUS,i.xAxisLength()*i.maxBubbleRelativeSize()]);var a=i.data(),b=i.chartBodyG().selectAll("g."+i.BUBBLE_NODE_CLASS).data(a,function(a){return a.key});i.sortBubbleSize()&&b.order(),b=c(b),e(b),f(b),i.fadeDeselectedArea(i.filter())},i.renderBrush=function(){},i.redrawBrush=function(a,b){i.fadeDeselectedArea(a)},i.anchor(a,b)},d.compositeChart=function(b,c){function e(a,b){var c,d,e,g,h;return a&&(c=m(),d=p()),b&&(e=n(),g=q()),w.alignYAxes()&&a&&b&&(h=f(c,d,e,g)),h||{lyAxisMin:c,lyAxisMax:d,ryAxisMin:e,ryAxisMax:g}}function f(a,b,c,d){var e=(d-c)/(b-a);return{lyAxisMin:Math.min(a,c/e),lyAxisMax:Math.max(b,d/e),ryAxisMin:Math.min(c,a*e),ryAxisMax:Math.max(d,b*e)}}function g(b){var c=void 0===w.rightY()||w.elasticY(),d=c||w.resizing();void 0===w.rightY()&&w.rightY(a.scaleLinear()),c&&w.rightY().domain([b.ryAxisMin,b.ryAxisMax]),d&&w.rightY().rangeRound([w.yAxisHeight(),0]),w.rightY().range([w.yAxisHeight(),0]),w.rightYAxis(w.rightYAxis().scale(w.rightY()))}function h(b){var c=void 0===w.y()||w.elasticY(),d=c||w.resizing();void 0===w.y()&&w.y(a.scaleLinear()),c&&w.y().domain([b.lyAxisMin,b.lyAxisMax]),d&&w.y().rangeRound([w.yAxisHeight(),0]),w.y().range([w.yAxisHeight(),0]),w.yAxis(w.yAxis().scale(w.y()))}function i(a,b){a._generateG(w.g()),a.g().attr("class",u+" _"+b)}function j(){return x.filter(function(a){return!a.useRightYAxis()})}function k(){return x.filter(function(a){return a.useRightYAxis()})}function l(a){return a.map(function(a){return a.yAxisMin()})}function m(){return a.min(l(j()))}function n(){return a.min(l(k()))}function o(a){return a.map(function(a){return a.yAxisMax()})}function p(){return d.utils.add(a.max(o(j())),w.yAxisPadding())}function q(){return d.utils.add(a.max(o(k())),w.yAxisPadding())}function r(){return x.map(function(a){return a.xAxisMin()})}function s(){return x.map(function(a){return a.xAxisMax()})}var t,u="sub",v=12,w=d.coordinateGridMixin({}),x=[],y={},z=!1,A=!0,B=!1,C=a.axisRight(),D=0,E=v,F=!1;return w._mandatoryAttributes([]),w.transitionDuration(500),w.transitionDelay(0),d.override(w,"_generateG",function(){for(var a=this.__generateG(),b=0;b<x.length;++b){var c=x[b];i(c,b),c.dimension()||c.dimension(w.dimension()),c.group()||c.group(w.group()),c.chartGroup(w.chartGroup()),c.svg(w.svg()),c.xUnits(w.xUnits()),c.transitionDuration(w.transitionDuration(),w.transitionDelay()),c.parentBrushOn(w.brushOn()),c.brushOn(!1),c.renderTitle(w.renderTitle()),c.elasticX(w.elasticX())}return a}),w.applyBrushSelection=function(a){w.replaceFilter(a);for(var b=0;b<x.length;++b)x[b].replaceFilter(a);w.redrawGroup()},w._prepareYAxis=function(){var a=0!==j().length,b=0!==k().length,c=e(a,b);a&&h(c),b&&g(c),j().length>0&&!F?w._renderHorizontalGridLinesForAxis(w.g(),w.y(),w.yAxis()):k().length>0&&w._renderHorizontalGridLinesForAxis(w.g(),t,C)},w.renderYAxis=function(){0!==j().length&&(w.renderYAxisAt("y",w.yAxis(),w.margins().left),w.renderYAxisLabel("y",w.yAxisLabel(),-90)),0!==k().length&&(w.renderYAxisAt("yr",w.rightYAxis(),w.width()-w.margins().right),w.renderYAxisLabel("yr",w.rightYAxisLabel(),90,w.width()-E))},w.plotData=function(){for(var a=0;a<x.length;++a){var b=x[a];b.g()||i(b,a),z&&b.colors(w.colors()),b.x(w.x()),b.xAxis(w.xAxis()),b.useRightYAxis()?(b.y(w.rightY()),b.yAxis(w.rightYAxis())):(b.y(w.y()),b.yAxis(w.yAxis())),b.plotData(),b._activateRenderlets()}},w.useRightAxisGridLines=function(a){return arguments?(F=a,w):F},w.childOptions=function(a){return arguments.length?(y=a,x.forEach(function(a){a.options(y)}),w):y},w.fadeDeselectedArea=function(a){if(w.brushOn())for(var b=0;b<x.length;++b){var c=x[b];c.fadeDeselectedArea(a)}},w.rightYAxisLabel=function(a,b){return arguments.length?(D=a,w.margins().right-=E,E=void 0===b?v:b,w.margins().right+=E,w):D},w.compose=function(a){return x=a,x.forEach(function(a){a.height(w.height()),a.width(w.width()),a.margins(w.margins()),A&&a.title(w.title()),a.options(y)}),w},w.children=function(){return x},w.shareColors=function(a){return arguments.length?(z=a,w):z},w.shareTitle=function(a){return arguments.length?(A=a,w):A},w.rightY=function(a){return arguments.length?(t=a,w.rescale(),w):t},w.alignYAxes=function(a){return arguments.length?(B=a,w.rescale(),w):B},delete w.yAxisMin,delete w.yAxisMax,d.override(w,"xAxisMin",function(){return d.utils.subtract(a.min(r()),w.xAxisPadding(),w.xAxisPaddingUnit())}),d.override(w,"xAxisMax",function(){return d.utils.add(a.max(s()),w.xAxisPadding(),w.xAxisPaddingUnit())}),w.legendables=function(){return x.reduce(function(a,b){return z&&b.colors(w.colors()),a.push.apply(a,b.legendables()),a},[])},w.legendHighlight=function(a){for(var b=0;b<x.length;++b){var c=x[b];c.legendHighlight(a)}},w.legendReset=function(a){for(var b=0;b<x.length;++b){var c=x[b];c.legendReset(a)}},w.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},w.rightYAxis=function(a){return arguments.length?(C=a,w):C},w.anchor(b,c)},d.seriesChart=function(b,c){function e(b,c){return a.ascending(i.keyAccessor()(b),i.keyAccessor()(c))}function f(a){j[a].g()&&j[a].g().remove(),delete j[a]}function g(){Object.keys(j).map(f),j={}}var h,i=d.compositeChart(b,c),j={},k=d.lineChart,l=a.ascending,m=e;return i._mandatoryAttributes().push("seriesAccessor","chart"),i.shareColors(!0),i._preprocessData=function(){var b,e=[],g=a.nest().key(h);l&&g.sortKeys(l),m&&g.sortValues(m);var n=g.entries(i.data()),o=n.map(function(a,f){var g=j[a.key]||k.call(i,i,c,a.key,f);return j[a.key]||(b=!0),j[a.key]=g,e.push(a.key),g.dimension(i.dimension()).group({all:"function"==typeof a.values?a.values:d.utils.constant(a.values)},a.key).keyAccessor(i.keyAccessor()).valueAccessor(i.valueAccessor()).brushOn(!1)});Object.keys(j).filter(function(a){return e.indexOf(a)===-1}).forEach(function(a){f(a),b=!0}),i._compose(o),b&&i.legend()&&i.legend().render()},i.chart=function(a){return arguments.length?(k=a,g(),i):k},i.seriesAccessor=function(a){return arguments.length?(h=a,g(),i):h},i.seriesSort=function(a){return arguments.length?(l=a,g(),i):l},i.valueSort=function(a){return arguments.length?(m=a,g(),i):m},i._compose=i.compose,delete i.compose,i},d.geoChoroplethChart=function(b,c){function e(a){var b=f();if(g(a)){var c=h(a);n(c,a,b),o(c,a,b)}}function f(){for(var a={},b=p.data(),c=0;c<b.length;++c)a[p.keyAccessor()(b[c])]=p.valueAccessor()(b[c]);return a}function g(a){return m(a).keyAccessor}function h(a){var b=p.svg().selectAll(i(a)).classed("selected",function(b){return j(a,b)}).classed("deselected",function(b){return k(a,b)}).attr("class",function(b){var c=m(a).name,e=d.utils.nameToId(m(a).keyAccessor(b)),f=c+" "+e;return j(a,b)&&(f+=" selected"),k(a,b)&&(f+=" deselected"),f});return b}function i(a){return"g.layer"+a+" g."+m(a).name}function j(a,b){return p.hasFilter()&&p.hasFilter(l(a,b))}function k(a,b){return p.hasFilter()&&!p.hasFilter(l(a,b))}function l(a,b){return m(a).keyAccessor(b)}function m(a){return t[a]}function n(b,c,e){var f=b.select("path").attr("fill",function(){var b=a.select(this).attr("fill");return b?b:"none"}).on("click",function(a){return p.onClick(a,c)});d.transition(f,p.transitionDuration(),p.transitionDelay()).attr("fill",function(a,b){return p.getColor(e[m(c).keyAccessor(a)],b)})}function o(a,b,c){p.renderTitle()&&a.selectAll("title").text(function(a){var d=l(b,a),e=c[d];return p.title()({key:d,value:e})})}var p=d.colorMixin(d.baseMixin({}));p.colorAccessor(function(a){return a||0});var q,r,s=a.geoPath(),t=[];p._doRender=function(){p.resetSvg();for(var a=0;a<t.length;++a){var b=p.svg().append("g").attr("class","layer"+a),c=b.selectAll("g."+m(a).name).data(m(a).data);c=c.enter().append("g").attr("class",m(a).name).merge(c),c.append("path").attr("fill","white").attr("d",u()),c.append("title"),e(a)}q=!1},p.onClick=function(a,b){var c=m(b).keyAccessor(a);d.events.trigger(function(){p.filter(c),p.redrawGroup()})},p._doRedraw=function(){for(var a=0;a<t.length;++a)e(a),q&&p.svg().selectAll("g."+m(a).name+" path").attr("d",u());q=!1},p.overlayGeoJson=function(a,b,c){for(var d=0;d<t.length;++d)if(t[d].name===b)return t[d].data=a,t[d].keyAccessor=c,p;return t.push({name:b,data:a,keyAccessor:c}),p},p.projection=function(a){return arguments.length?(r=a,q=!0,p):r};var u=function(){return void 0===r?(d.logger.warn("choropleth projection default of geoAlbers is deprecated, in next version projection will need to be set explicitly"),s.projection(a.geoAlbersUsa())):s.projection(r)};return p.geoJsons=function(){return t},p.geoPath=function(){return s},p.removeGeoJson=function(a){for(var b=[],c=0;c<t.length;++c){var d=t[c];d.name!==a&&b.push(d)}return t=b,p},p.anchor(b,c)},d.bubbleOverlay=function(b,c){function e(){return j=n.select("g."+k),j.empty()&&(j=n.svg().append("g").attr("class",k)),j}function f(){var a=g();n.calculateRadiusDomain(),o.forEach(function(b){var c=h(b,a),e=c.select("circle."+m);e.empty()&&(e=c.append("circle").attr("class",m).attr("r",0).attr("fill",n.getColor).on("click",n.onClick)),d.transition(e,n.transitionDuration(),n.transitionDelay()).attr("r",function(a){return n.bubbleR(a)}),n._doRenderLabel(c),n._doRenderTitles(c)})}function g(){var a={};return n.data().forEach(function(b){a[n.keyAccessor()(b)]=b}),a}function h(a,b){var c=l+" "+d.utils.nameToId(a.name),e=j.select("g."+d.utils.nameToId(a.name));return e.empty()&&(e=j.append("g").attr("class",c).attr("transform","translate("+a.x+","+a.y+")")),e.datum(b[a.name]),e}function i(){var a=g();n.calculateRadiusDomain(),o.forEach(function(b){var c=h(b,a),e=c.select("circle."+m);d.transition(e,n.transitionDuration(),n.transitionDelay()).attr("r",function(a){return n.bubbleR(a)}).attr("fill",n.getColor),n.doUpdateLabels(c),n.doUpdateTitles(c)})}var j,k="bubble-overlay",l="node",m="bubble",n=d.bubbleMixin(d.baseMixin({})),o=[];return n.transitionDuration(750),n.transitionDelay(0),n.radiusValueAccessor(function(a){return a.value}),n.point=function(a,b,c){return o.push({name:a,x:b,y:c}),n},n._doRender=function(){return j=e(),n.r().range([n.MIN_RADIUS,n.width()*n.maxBubbleRelativeSize()]),f(),n.fadeDeselectedArea(n.filter()),n},n._doRedraw=function(){return i(),n.fadeDeselectedArea(n.filter()),n},n.debug=function(b){if(b){var c=n.select("g."+d.constants.DEBUG_GROUP_CLASS);c.empty()&&(c=n.svg().append("g").attr("class",d.constants.DEBUG_GROUP_CLASS));var e=c.append("text").attr("x",10).attr("y",20);c.append("rect").attr("width",n.width()).attr("height",n.height()).on("mousemove",function(){var b=a.mouse(c.node()),d=b[0]+", "+b[1];e.text(d)})}else n.selectAll(".debug").remove();return n},n.anchor(b,c),n},d.rowChart=function(b,c){function e(){if(!t||u){var b=a.extent(v,G.cappedValueAccessor);b[0]>0&&(b[0]=0),b[1]<0&&(b[1]=0),t=a.scaleLinear().domain(b).range([0,G.effectiveWidth()])}H.scale(t)}function f(){var a=s.select("g.axis");e(),a.empty()&&(a=s.append("g").attr("class","axis")),a.attr("transform","translate(0, "+G.effectiveHeight()+")"),d.transition(a,G.transitionDuration(),G.transitionDelay()).call(H)}function g(){s.selectAll("g.tick").select("line.grid-line").remove(),s.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-G.effectiveHeight()})}function h(){v=G.data(),f(),g();var a=s.selectAll("g."+D).data(v);j(a),a=i(a).merge(a),l(a)}function i(a){var b=a.enter().append("g").attr("class",function(a,b){return D+" _"+b});return b.append("rect").attr("width",0),n(b),b}function j(a){a.exit().remove()}function k(){var a=t(0);return a===-(1/0)||a!==a?t(1):a}function l(a){var b,c=v.length;b=C?C:(G.effectiveHeight()-(c+1)*B)/c,y||(x=b/2);var e=a.attr("transform",function(a,c){return"translate(0,"+((c+1)*B+c*b)+")"}).select("rect").attr("height",b).attr("fill",G.getColor).on("click",p).classed("deselected",function(a){return!!G.hasFilter()&&!r(a)}).classed("selected",function(a){return!!G.hasFilter()&&r(a)});d.transition(e,G.transitionDuration(),G.transitionDelay()).attr("width",function(a){return Math.abs(k()-t(G.valueAccessor()(a)))}).attr("transform",q),m(a),o(a)}function m(a){G.renderTitle()&&(a.select("title").remove(),a.append("title").text(G.title()))}function n(a){G.renderLabel()&&a.append("text").on("click",p),G.renderTitleLabel()&&a.append("text").attr("class",E).on("click",p)}function o(a){if(G.renderLabel()){var b=a.select("text").attr("x",w).attr("y",x).attr("dy",z).on("click",p).attr("class",function(a,b){return D+" _"+b}).text(function(a){return G.label()(a)});d.transition(b,G.transitionDuration(),G.transitionDelay()).attr("transform",q)}if(G.renderTitleLabel()){var c=a.select("."+E).attr("x",G.effectiveWidth()-A).attr("y",x).attr("dy",z).attr("text-anchor","end").on("click",p).attr("class",function(a,b){return E+" _"+b}).text(function(a){return G.title()(a)});d.transition(c,G.transitionDuration(),G.transitionDelay()).attr("transform",q)}}function p(a){G.onClick(a)}function q(a){var b=t(G.cappedValueAccessor(a)),c=k(),d=b>c?c:b;return"translate("+d+",0)"}function r(a){return G.hasFilter(G.cappedKeyAccessor(a))}var s,t,u,v,w=10,x=15,y=!1,z="0.35em",A=2,B=5,C=!1,D="row",E="titlerow",F=!1,G=d.capMixin(d.marginMixin(d.colorMixin(d.baseMixin({})))),H=a.axisBottom();return G.rowsCap=G.cap,G._doRender=function(){return G.resetSvg(),s=G.svg().append("g").attr("transform","translate("+G.margins().left+","+G.margins().top+")"),h(),G},G.title(function(a){return G.cappedKeyAccessor(a)+": "+G.cappedValueAccessor(a)}),G.label(G.cappedKeyAccessor),G.x=function(a){return arguments.length?(t=a,G):t},G.renderTitleLabel=function(a){return arguments.length?(F=a,G):F},G._doRedraw=function(){return h(),G},G.xAxis=function(a){return arguments.length?(H=a,this):H},G.fixedBarHeight=function(a){return arguments.length?(C=a,G):C},G.gap=function(a){return arguments.length?(B=a,G):B},G.elasticX=function(a){return arguments.length?(u=a,G):u},G.labelOffsetX=function(a){return arguments.length?(w=a,G):w},G.labelOffsetY=function(a){return arguments.length?(x=a,y=!0,G):x},G.titleLabelOffsetX=function(a){return arguments.length?(A=a,G):A},G.anchor(b,c)},d.legend=function(){function a(){return k+j}var b,c,e,f=2,g={},h=0,i=0,j=12,k=5,l=!1,m=560,n=70,o=!1,p=d.pluck("name");return g.parent=function(a){return arguments.length?(b=a,g):b},g.render=function(){b.svg().select("g.dc-legend").remove(),e=b.svg().append("g").attr("class","dc-legend").attr("transform","translate("+h+","+i+")");var g=b.legendables();void 0!==c&&(g=g.slice(0,c));var q=e.selectAll("g.dc-legend-item").data(g).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(a){b.legendHighlight(a)}).on("mouseout",function(a){b.legendReset(a)}).on("click",function(a){a.chart.legendToggle(a)});e.selectAll("g.dc-legend-item").classed("fadeout",function(a){return a.chart.isLegendableHidden(a)}),g.some(d.pluck("dashstyle"))?q.append("line").attr("x1",0).attr("y1",j/2).attr("x2",j).attr("y2",j/2).attr("stroke-width",2).attr("stroke-dasharray",d.pluck("dashstyle")).attr("stroke",d.pluck("color")):q.append("rect").attr("width",j).attr("height",j).attr("fill",function(a){return a?a.color:"blue"}),q.append("text").text(p).attr("x",j+f).attr("y",function(){return j/2+(this.clientHeight?this.clientHeight:13)/2-2});var r=0,s=0;q.attr("transform",function(b,c){if(l){var d=o===!0?this.getBBox().width+k:n;r+d>m&&r>0&&(++s,r=0);var e="translate("+r+","+s*a()+")";return r+=d,e}return"translate(0,"+c*a()+")"})},g.x=function(a){return arguments.length?(h=a,g):h},g.y=function(a){return arguments.length?(i=a,g):i},g.gap=function(a){return arguments.length?(k=a,g):k},g.itemHeight=function(a){return arguments.length?(j=a,g):j},g.horizontal=function(a){return arguments.length?(l=a,g):l},g.legendWidth=function(a){return arguments.length?(m=a,g):m},g.itemWidth=function(a){return arguments.length?(n=a,g):n},g.autoItemWidth=function(a){return arguments.length?(o=a,g):o},g.legendText=function(a){return arguments.length?(p=a,g):p},g.maxItems=function(a){return arguments.length?(c=d.utils.isNumber(a)?a:void 0,g):c},g},d.htmlLegend=function(){var b,c,e,f,g={},h="dc-html-legend",i="dc-legend-item-horizontal",j="dc-legend-item-vertical",k=d.pluck("name"),l=!1,m=!1;return g.parent=function(a){return arguments.length?(b=a,g):b},g.render=function(){var a=l?i:j;c.select("div.dc-html-legend").remove();var g=c.append("div").attr("class",h);g.attr("style","max-width:"+c.nodes()[0].style.width);var n=b.legendables(),o=b.filters();void 0!==e&&(n=n.slice(0,e));var p=f?f:a,q=g.selectAll("div."+p).data(n).enter().append("div").classed(p,!0).on("mouseover",b.legendHighlight).on("mouseout",b.legendReset).on("click",b.legendToggle);m&&q.classed(d.constants.SELECTED_CLASS,function(a){return o.indexOf(a.name)!==-1}),q.append("span").attr("class","dc-legend-item-color").style("background-color",d.pluck("color")),q.append("span").attr("class","dc-legend-item-label").attr("title",k).text(k)},g.container=function(b){return arguments.length?(c=a.select(b),g):c},g.legendItemClass=function(a){return arguments.length?(f=a,g):f},g.highlightSelected=function(a){return arguments.length?(m=a,g):m},g.horizontal=function(a){return arguments.length?(l=a,g):l},g.legendText=function(a){return arguments.length?(k=a,g):k},g.maxItems=function(a){return arguments.length?(e=d.utils.isNumber(a)?a:void 0,g):e},g},d.scatterPlot=function(b,c){function e(a,b){return j(a)?v[b]?Math.pow(n,2):Math.pow(o,2):Math.pow(r,2)}function f(a,b){h.renderTitle()&&(a.selectAll("title").remove(),a.append("title").text(function(a){return h.title()(a)}))}function g(b,c){var e=h.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return b(a.select(this))}),f=i.size();i.size(Math.pow(c,2)),d.transition(e,h.transitionDuration(),h.transitionDelay()).attr("d",i),i.size(f)}var h=d.coordinateGridMixin({}),i=a.symbol(),j=function(a){return a.value},k=h.keyAccessor();h.keyAccessor(function(a){return k(a)[0]}),h.valueAccessor(function(a){return k(a)[1]}),h.colorAccessor(function(){return h._groupName}),h.title(function(a){return h.keyAccessor()(a)+","+h.valueAccessor()(a)+": "+h.existenceAccessor()(a)});var l=function(a){return"translate("+h.x()(h.keyAccessor()(a))+","+h.y()(h.valueAccessor()(a))+")"},m=7,n=5,o=3,p=null,q=1,r=0,s=0,t=1,u=null,v=[];return h.brush(a.brush()),i.size(e),d.override(h,"_filter",function(a){return arguments.length?h.__filter(d.filters.RangedTwoDimensionalFilter(a)):h.__filter()}),h.plotData=function(){var a=h.chartBodyG().selectAll("path.symbol").data(h.data());a=a.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",h.getColor).attr("transform",l).merge(a),a.call(f,h.data()),a.each(function(a,b){v[b]=!h.filter()||h.filter().isFiltered([h.keyAccessor()(a),h.valueAccessor()(a)])}),d.transition(a,h.transitionDuration(),h.transitionDelay()).attr("opacity",function(a,b){return j(a)?v[b]?t:h.excludedOpacity():s}).attr("fill",function(a,b){return u&&!j(a)?u:h.excludedColor()&&!v[b]?h.excludedColor():h.getColor(a)}).attr("transform",l).attr("d",i),d.transition(a.exit(),h.transitionDuration(),h.transitionDelay()).attr("opacity",0).remove()},h.existenceAccessor=function(a){return arguments.length?(j=a,this):j},h.symbol=function(a){return arguments.length?(i.type(a),h):i.type()},h.customSymbol=function(a){return arguments.length?(i=a,i.size(e),h):i},h.symbolSize=function(a){return arguments.length?(n=a,h):n},h.highlightedSize=function(a){return arguments.length?(m=a,h):m},h.excludedSize=function(a){return arguments.length?(o=a,h):o},h.excludedColor=function(a){return arguments.length?(p=a,h):p},h.excludedOpacity=function(a){return arguments.length?(q=a,h):q},h.hiddenSize=h.emptySize=function(a){return arguments.length?(r=a,h):r},h.emptyColor=function(a){return arguments.length?(u=a,h):u},h.emptyOpacity=function(a){return arguments.length?(s=a,h):s},h.nonemptyOpacity=function(a){return arguments.length?(t=a,h):s},h.legendables=function(){return[{chart:h,name:h._groupName,color:h.getColor()}]},h.legendHighlight=function(b){g(function(a){return a.attr("fill")===b.color},m),h.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return a.select(this).attr("fill")!==b.color}).classed("fadeout",!0)},h.legendReset=function(b){g(function(a){return a.attr("fill")===b.color},n),h.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return a.select(this).attr("fill")!==b.color}).classed("fadeout",!1)},h.createBrushHandlePaths=function(){},h.extendBrush=function(a){return h.round()&&(a[0]=a[0].map(h.round()),a[1]=a[1].map(h.round())),a},h.brushIsEmpty=function(a){return!a||a[0][0]>=a[1][0]||a[0][1]>=a[1][1]},h._brushing=function(){if(a.event.sourceEvent&&(!a.event.sourceEvent.type||["start","brush","end"].indexOf(a.event.sourceEvent.type)===-1)){var b=a.event.selection,c=h.brushIsEmpty(b);b&&(b=b.map(function(a){return a.map(function(a,b){var c=0===b?h.x():h.y();return c.invert(a)})}),b=h.extendBrush(b),c=c&&h.brushIsEmpty(b)),h.redrawBrush(b,!1);var e=c?null:d.filters.RangedTwoDimensionalFilter(b);d.events.trigger(function(){h.replaceFilter(e),h.redrawGroup()},d.constants.EVENT_DELAY)}},h.redrawBrush=function(a,b){var c=h.brush(),e=h.gBrush();if(h.brushOn()&&e)if(h.resizing()&&h.setBrushExtents(b),a){a=a.map(function(a){return a.map(function(a,b){var c=0===b?h.x():h.y();return c(a)})});var f=d.optionalTransition(b,h.transitionDuration(),h.transitionDelay())(e);f.call(c.move,a)}else e.call(c.move,a);h.fadeDeselectedArea(a)},h.setBrushY=function(a){a.call(h.brush().y(h.y()))},h.anchor(b,c)},d.numberDisplay=function(b,c){function e(a){if(!a.length)return null;var b=i._computeOrderedGroups(a);return b[b.length-1]}var f,g="number-display",h=a.format(".2s"),i=d.baseMixin({}),j={one:"",some:"",none:""};return i._mandatoryAttributes(["group"]),i.ordering(function(a){return a.value}),i.html=function(a){return arguments.length?(a.none?j.none=a.none:a.one?j.none=a.one:a.some&&(j.none=a.some),a.one?j.one=a.one:a.some&&(j.one=a.some),a.some?j.some=a.some:a.one&&(j.some=a.one),i):j},i.value=function(){return i.data()},i.data(function(a){var b=a.value?a.value():e(a.all());return i.valueAccessor()(b)}),i.transitionDuration(250),i.transitionDelay(0),i._doRender=function(){var b=i.value(),c=i.selectAll("."+g);c.empty()&&(c=c.data([0]).enter().append("span").attr("class",g).merge(c)),c.transition().duration(i.transitionDuration()).delay(i.transitionDelay()).ease(a.easeQuad).tween("text",function(){var c=isFinite(f)?f:0,d=a.interpolateNumber(c||0,b);f=b;var e=this;return function(a){var c=null,f=i.formatNumber()(d(a));0===b&&""!==j.none?c=j.none:1===b&&""!==j.one?c=j.one:""!==j.some&&(c=j.some),e.innerHTML=c?c.replace("%number",f):f}})},i._doRedraw=function(){return i._doRender()},i.formatNumber=function(a){return arguments.length?(h=a,i):h},i.anchor(b,c)},d.heatMap=function(b,c){function e(a,b){var c=p.selectAll(".box-group").filter(function(c){return c.key[a]===b}),e=c.filter(function(a){return!p.hasFilter(a.key)});d.events.trigger(function(){var a=e.empty()?c:e,b=a.data().map(function(a){return d.filters.TwoDimensionalFilter(a.key)});p._filter([b]),p.redrawGroup()})}var f,g,h,i=6.75,j=a.ascending,k=a.ascending,l=a.scaleBand(),m=a.scaleBand(),n=i,o=i,p=d.colorMixin(d.marginMixin(d.baseMixin({})));p._mandatoryAttributes(["group"]),p.title(p.colorAccessor());var q=function(a){return a},r=function(a){return a};p.colsLabel=function(a){return arguments.length?(q=a,p):q},p.rowsLabel=function(a){return arguments.length?(r=a,p):r};var s=function(a){e(0,a)},t=function(a){e(1,a)},u=function(a){var b=a.key;d.events.trigger(function(){p.filter(b),p.redrawGroup()})};return d.override(p,"filter",function(a){return arguments.length?p._filter(d.filters.TwoDimensionalFilter(a)):p._filter()}),p.rows=function(a){return arguments.length?(h=a,p):h},p.rowOrdering=function(a){return arguments.length?(k=a,p):k},p.cols=function(a){return arguments.length?(g=a,p):g},p.colOrdering=function(a){return arguments.length?(j=a,p):j},p._doRender=function(){return p.resetSvg(),f=p.svg().append("g").attr("class","heatmap").attr("transform","translate("+p.margins().left+","+p.margins().top+")"),p._doRedraw()},p._doRedraw=function(){var a=p.data(),b=p.rows()||a.map(p.valueAccessor()),c=p.cols()||a.map(p.keyAccessor());k&&(b=b.sort(k)),j&&(c=c.sort(j)),b=m.domain(b),c=l.domain(c);var e=b.domain().length,g=c.domain().length,h=Math.floor(p.effectiveWidth()/g),i=Math.floor(p.effectiveHeight()/e);c.rangeRound([0,p.effectiveWidth()]),b.rangeRound([p.effectiveHeight(),0]);var q=f.selectAll("g.box-group").data(p.data(),function(a,b){return p.keyAccessor()(a,b)+"\0"+p.valueAccessor()(a,b)});q.exit().remove();var r=q.enter().append("g").attr("class","box-group");r.append("rect").attr("class","heat-box").attr("fill","white").attr("x",function(a,b){return c(p.keyAccessor()(a,b))}).attr("y",function(a,c){return b(p.valueAccessor()(a,c))}).on("click",p.boxOnClick()),p.renderTitle()&&(r.append("title"),q.select("title").text(p.title())),q=r.merge(q),d.transition(q.select("rect"),p.transitionDuration(),p.transitionDelay()).attr("x",function(a,b){return c(p.keyAccessor()(a,b))}).attr("y",function(a,c){return b(p.valueAccessor()(a,c))}).attr("rx",n).attr("ry",o).attr("fill",p.getColor).attr("width",h).attr("height",i);var s=f.select("g.cols");s.empty()&&(s=f.append("g").attr("class","cols axis"));var t=s.selectAll("text").data(c.domain());t.exit().remove(),t=t.enter().append("text").attr("x",function(a){return c(a)+h/2}).style("text-anchor","middle").attr("y",p.effectiveHeight()).attr("dy",12).on("click",p.xAxisOnClick()).text(p.colsLabel()).merge(t),d.transition(t,p.transitionDuration(),p.transitionDelay()).text(p.colsLabel()).attr("x",function(a){return c(a)+h/2}).attr("y",p.effectiveHeight());var u=f.select("g.rows");u.empty()&&(u=f.append("g").attr("class","rows axis"));var v=u.selectAll("text").data(b.domain());return v.exit().remove(),v=v.enter().append("text").style("text-anchor","end").attr("x",0).attr("dx",-2).attr("y",function(a){return b(a)+i/2}).attr("dy",6).on("click",p.yAxisOnClick()).text(p.rowsLabel()).merge(v),d.transition(v,p.transitionDuration(),p.transitionDelay()).text(p.rowsLabel()).attr("y",function(a){return b(a)+i/2}),p.hasFilter()?p.selectAll("g.box-group").each(function(a){p.isSelectedNode(a)?p.highlightSelected(this):p.fadeDeselected(this)}):p.selectAll("g.box-group").each(function(){p.resetHighlight(this)}),p},p.boxOnClick=function(a){return arguments.length?(u=a,p):u},p.xAxisOnClick=function(a){return arguments.length?(s=a,p):s},p.yAxisOnClick=function(a){return arguments.length?(t=a,p):t},p.xBorderRadius=function(a){return arguments.length?(n=a,p):n},p.yBorderRadius=function(a){return arguments.length?(o=a,p):o},p.isSelectedNode=function(a){return p.hasFilter(a.key)},p.anchor(b,c)},function(){function b(a){return[0,a.length-1]}function c(b){return[a.quantile(b,.25),a.quantile(b,.5),a.quantile(b,.75)]}a.box=function(){function e(b){b.each(function(b,c){b=b.map(k).sort(a.ascending);var d=a.select(this),e=b.length,o=b[0],p=b[e-1],q=b.quartiles=m(b),r=l&&l.call(this,b,c),s=r&&r.map(function(a){return b[a]}),t=r?a.range(0,r[0]).concat(a.range(r[1]+1,e)):a.range(e),u=a.scaleLinear().domain(j&&j.call(this,b,c)||[o,p]).range([g,0]),v=this.__chart__||a.scaleLinear().domain([0,1/0]).range(u.range());this.__chart__=u;var w=d.selectAll("line.center").data(s?[s]:[]);w.enter().insert("line","rect").attr("class","center").attr("x1",f/2).attr("y1",function(a){return v(a[0])}).attr("x2",f/2).attr("y2",function(a){return v(a[1])}).style("opacity",1e-6).transition().duration(h).delay(i).style("opacity",1).attr("y1",function(a){return u(a[0])}).attr("y2",function(a){return u(a[1])}),w.transition().duration(h).delay(i).style("opacity",1).attr("x1",f/2).attr("x2",f/2).attr("y1",function(a){return u(a[0])}).attr("y2",function(a){return u(a[1])}),w.exit().transition().duration(h).delay(i).style("opacity",1e-6).attr("y1",function(a){return u(a[0])}).attr("y2",function(a){return u(a[1])}).remove();var x=d.selectAll("rect.box").data([q]);x.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(a){return v(a[2])}).attr("width",f).attr("height",function(a){return v(a[0])-v(a[2])}).transition().duration(h).delay(i).attr("y",function(a){return u(a[2])}).attr("height",function(a){return u(a[0])-u(a[2])}),x.transition().duration(h).delay(i).attr("width",f).attr("y",function(a){return u(a[2])}).attr("height",function(a){return u(a[0])-u(a[2])});var y=d.selectAll("line.median").data([q[1]]);y.enter().append("line").attr("class","median").attr("x1",0).attr("y1",v).attr("x2",f).attr("y2",v).transition().duration(h).delay(i).attr("y1",u).attr("y2",u),y.transition().duration(h).delay(i).attr("x1",0).attr("x2",f).attr("y1",u).attr("y2",u);var z=d.selectAll("line.whisker").data(s||[]);z.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",v).attr("x2",f).attr("y2",v).style("opacity",1e-6).transition().duration(h).delay(i).attr("y1",u).attr("y2",u).style("opacity",1),z.transition().duration(h).delay(i).attr("x1",0).attr("x2",f).attr("y1",u).attr("y2",u).style("opacity",1),z.exit().transition().duration(h).delay(i).attr("y1",u).attr("y2",u).style("opacity",1e-6).remove();var A=d.selectAll("circle.outlier").data(t,Number);A.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",f/2).attr("cy",function(a){return v(b[a])}).style("opacity",1e-6).transition().duration(h).delay(i).attr("cy",function(a){return u(b[a])}).style("opacity",1),A.transition().duration(h).delay(i).attr("cx",f/2).attr("cy",function(a){return u(b[a])}).style("opacity",1),A.exit().transition().duration(h).delay(i).attr("cy",function(a){return u(b[a])}).style("opacity",1e-6).remove();var B=n||u.tickFormat(8),C=d.selectAll("text.box").data(q);C.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(a,b){return 1&b?6:-6}).attr("x",function(a,b){return 1&b?f:0}).attr("y",v).attr("text-anchor",function(a,b){return 1&b?"start":"end"}).text(B).transition().duration(h).delay(i).attr("y",u),C.transition().duration(h).delay(i).text(B).attr("x",function(a,b){return 1&b?f:0}).attr("y",u);var D=d.selectAll("text.whisker").data(s||[]);D.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",f).attr("y",v).text(B).style("opacity",1e-6).transition().duration(h).delay(i).attr("y",u).style("opacity",1),D.transition().duration(h).delay(i).text(B).attr("x",f).attr("y",u).style("opacity",1),D.exit().transition().duration(h).delay(i).attr("y",u).style("opacity",1e-6).remove()}),a.timerFlush()}var f=1,g=1,h=0,i=0,j=null,k=Number,l=b,m=c,n=null;return e.width=function(a){return arguments.length?(f=a,e):f},e.height=function(a){return arguments.length?(g=a,e):g},e.tickFormat=function(a){return arguments.length?(n=a,e):n},e.duration=function(a){return arguments.length?(h=a,e):h},e.domain=function(a){return arguments.length?(j=null===a?a:"function"==typeof a?a:d.utils.constant(a),e):j},e.value=function(a){return arguments.length?(k=a,e):k},e.whiskers=function(a){return arguments.length?(l=a,e):l},e.quartiles=function(a){return arguments.length?(m=a,e):m},e}}(),d.boxPlot=function(b,c){function e(a){return function(b){var c=b.quartiles[0],d=b.quartiles[2],e=(d-c)*a,f=-1,g=b.length;do++f;while(b[f]<c-e);do--g;while(b[g]>d+e);return[f,g]}}function f(a){var b=a.enter().append("g");return b.attr("class","box").attr("transform",p).call(m).on("click",function(a){i.filter(i.keyAccessor()(a)),i.redrawGroup()}),b.merge(a)}function g(b){d.transition(b,i.transitionDuration(),i.transitionDelay()).attr("transform",p).call(m).each(function(){a.select(this).select("rect.box").attr("fill",i.getColor)})}function h(a){a.exit().remove().call(m)}var i=d.coordinateGridMixin({}),j=1.5,k=e,l=k(j),m=a.box(),n=null,o=function(a,b){
return i.isOrdinal()?i.x().bandwidth():a/(1+i.boxPadding())/b};i.yAxisPadding(12),i.x(a.scaleBand()),i.xUnits(d.units.ordinal),i.data(function(a){return a.all().map(function(a){return a.map=function(b){return b.call(a,a)},a}).filter(function(a){var b=i.valueAccessor()(a);return 0!==b.length})}),i.boxPadding=i._rangeBandPadding,i.boxPadding(.8),i.outerPadding=i._outerRangeBandPadding,i.outerPadding(.5),i.boxWidth=function(a){return arguments.length?(o="function"==typeof a?a:d.utils.constant(a),i):o};var p=function(a,b){var c=i.x()(i.keyAccessor()(a,b));return"translate("+c+", 0)"};return i._preprocessData=function(){i.elasticX()&&i.x().domain([])},i.plotData=function(){var a=o(i.effectiveWidth(),i.xUnitCount());m.whiskers(l).width(a).height(i.effectiveHeight()).value(i.valueAccessor()).domain(i.y().domain()).duration(i.transitionDuration()).tickFormat(n);var b=i.chartBodyG().selectAll("g.box").data(i.data(),i.keyAccessor()),c=f(b);g(c),h(b),i.fadeDeselectedArea(i.filter())},i.fadeDeselectedArea=function(a){if(i.hasFilter())if(i.isOrdinal())i.g().selectAll("g.box").each(function(a){i.isSelectedNode(a)?i.highlightSelected(this):i.fadeDeselected(this)});else{if(!i.brushOn()&&!i.parentBrushOn())return;var b=a[0],c=a[1],d=i.keyAccessor();i.g().selectAll("g.box").each(function(a){var e=d(a);e<b||e>=c?i.fadeDeselected(this):i.highlightSelected(this)})}else i.g().selectAll("g.box").each(function(){i.resetHighlight(this)})},i.isSelectedNode=function(a){return i.hasFilter(i.keyAccessor()(a))},i.yAxisMin=function(){var b=a.min(i.data(),function(b){return a.min(i.valueAccessor()(b))});return d.utils.subtract(b,i.yAxisPadding())},i.yAxisMax=function(){var b=a.max(i.data(),function(b){return a.max(i.valueAccessor()(b))});return d.utils.add(b,i.yAxisPadding())},i.tickFormat=function(a){return arguments.length?(n=a,i):n},i.anchor(b,c)},d.selectMenu=function(b,c){function e(){var a=h.selectAll("option."+j).data(k.data(),function(a){return k.keyAccessor()(a)});a.exit().remove(),a.enter().append("option").classed(j,!0).attr("value",function(a){return k.keyAccessor()(a)}).merge(a).text(k.title()),h.selectAll("option."+j).sort(p),h.on("change",f)}function f(b,c){var d,e=a.event.target;if(e.selectedOptions){var f=Array.prototype.slice.call(e.selectedOptions);d=f.map(function(a){return a.value})}else{var g=[].slice.call(a.event.target.options);d=g.filter(function(a){return a.selected}).map(function(a){return a.value})}1===d.length&&""===d[0]?d=n||null:m||1!==d.length||(d=d[0]),k.onChange(d)}function g(){m?h.attr("multiple",!0):h.attr("multiple",null),null!==o?h.attr("size",o):h.attr("size",null)}var h,i="dc-select-menu",j="dc-select-option",k=d.baseMixin({}),l="Select all",m=!1,n=null,o=null,p=function(a,b){return k.keyAccessor()(a)>k.keyAccessor()(b)?1:k.keyAccessor()(b)>k.keyAccessor()(a)?-1:0},q=function(a){return k.valueAccessor()(a)>0};k.data(function(a){return a.all().filter(q)}),k._doRender=function(){return k.select("select").remove(),h=k.root().append("select").classed(i,!0),h.append("option").text(l).attr("value",""),k._doRedraw(),k};var r=window.navigator.userAgent;return r.indexOf("Trident/")>0&&r.indexOf("MSIE")===-1&&(k.redraw=k.render),k._doRedraw=function(){return g(),e(),k.hasFilter()&&m?h.selectAll("option").property("selected",function(a){return"undefined"!=typeof a&&k.filters().indexOf(String(k.keyAccessor()(a)))>=0}):k.hasFilter()?h.property("value",k.filter()):h.property("value",""),k},k.onChange=function(a){a&&m?k.replaceFilter([a]):a?k.replaceFilter(a):k.filterAll(),d.events.trigger(function(){k.redrawGroup()})},k.order=function(a){return arguments.length?(p=a,k):p},k.promptText=function(a){return arguments.length?(l=a,k):l},k.filterDisplayed=function(a){return arguments.length?(q=a,k):q},k.multiple=function(a){return arguments.length?(m=a,k):m},k.promptValue=function(a){return arguments.length?(n=a,k):n},k.numberVisible=function(a){return arguments.length?(o=a,k):o},k.size=d.logger.deprecate(k.numberVisible,"selectMenu.size is ambiguous - use numberVisible instead"),k.anchor(b,c)},d.textFilterWidget=function(a,b){var c="dc-text-filter-input",e=d.baseMixin({}),f=function(a){return a.toLowerCase()},g=function(a){return a=f(a),function(b){return f(b).indexOf(a)!==-1}},h="search";return e.group(function(){throw"the group function on textFilterWidget should never be called, please report the issue"}),e._doRender=function(){e.select("input").remove();var a=e.root().append("input").classed(c,!0);return a.on("input",function(){e.dimension().filterFunction(g(this.value)),d.events.trigger(function(){d.redrawAll()},d.constants.EVENT_DELAY)}),e._doRedraw(),e},e._doRedraw=function(){return e.root().selectAll("input").attr("placeholder",h),e},e.normalize=function(a){return arguments.length?(f=a,e):f},e.placeHolder=function(a){return arguments.length?(h=a,e):h},e.filterFunctionFactory=function(a){return arguments.length?(g=a,e):g},e.anchor(a,b)},d.cboxMenu=function(b,c){function e(){var a=g.selectAll("li."+i).data(j.data(),function(a){return j.keyAccessor()(a)});if(a.exit().remove(),a=a.enter().append("li").classed(i,!0).merge(a),a.append("input").attr("type",m).attr("value",function(a){return j.keyAccessor()(a)}).attr("name","domain_"+o).attr("id",function(a,b){return"input_"+o+"_"+b}),a.append("label").attr("for",function(a,b){return"input_"+o+"_"+b}).text(j.title()),l)g.append("li").append("input").attr("type","reset").text(k).on("click",f);else{var b=g.append("li");b.append("input").attr("type",m).attr("value",n).attr("name","domain_"+o).attr("id",function(a,b){return"input_"+o+"_all"}).property("checked",!0),b.append("label").attr("for",function(a,b){return"input_"+o+"_all"}).text(k)}return g.selectAll("li."+i).sort(p),g.on("change",f),a}function f(b,c){var d,e,f=a.select(a.event.target);f.datum()?(e=a.select(this).selectAll("input").filter(function(a){if(a)return this.checked}),d=e.nodes().map(function(a){return a.value}),l||1!==d.length||(d=d[0])):d=n||null,j.onChange(d)}var g,h="dc-cbox-group",i="dc-cbox-item",j=d.baseMixin({}),k="Select all",l=!1,m="radio",n=null,o=Math.floor(1e5*Math.random())+1,p=function(a,b){return j.keyAccessor()(a)>j.keyAccessor()(b)?1:j.keyAccessor()(b)>j.keyAccessor()(a)?-1:0},q=function(a){return j.valueAccessor()(a)>0};return j.data(function(a){return a.all().filter(q)}),j._doRender=function(){return j._doRedraw()},j._doRedraw=function(){return j.select("ul").remove(),g=j.root().append("ul").classed(h,!0),e(),j.hasFilter()&&l?g.selectAll("input").property("checked",function(a){return a&&j.filters().indexOf(String(j.keyAccessor()(a)))>=0||!1}):j.hasFilter()&&g.selectAll("input").property("checked",function(a){return!!a&&j.keyAccessor()(a)===j.filter()}),j},j.onChange=function(a){a&&l?j.replaceFilter([a]):a?j.replaceFilter(a):j.filterAll(),d.events.trigger(function(){j.redrawGroup()})},j.order=function(a){return arguments.length?(p=a,j):p},j.promptText=function(a){return arguments.length?(k=a,j):k},j.filterDisplayed=function(a){return arguments.length?(q=a,j):q},j.multiple=function(a){return arguments.length?(l=a,m=l?"checkbox":"radio",j):l},j.promptValue=function(a){return arguments.length?(n=a,j):n},j.anchor(b,c)},d.abstractBubbleChart=d.bubbleMixin,d.baseChart=d.baseMixin,d.capped=d.capMixin,d.colorChart=d.colorMixin,d.coordinateGridChart=d.coordinateGridMixin,d.marginable=d.marginMixin,d.stackableChart=d.stackMixin,d.d3=a,d.crossfilter=b,d}if("function"==typeof define&&define.amd)define(["block_grouplatency/d3-lazy","block_grouplatency/crossfilter-lazy"],a);else if("object"==typeof module&&module.exports){var b=require("d3"),c=require("crossfilter");"function"!=typeof c&&(c=c.crossfilter),module.exports=a(b,c)}else this.dc=a(d3,crossfilter)}();