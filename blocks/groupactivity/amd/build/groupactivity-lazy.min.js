define(["jquery","core/ajax","core/templates"],function(a,b,c){return getPluginData=function(d){var e=b.call([{methodname:"block_groupactivity_get_data",args:d}]);e[0].done(function(b){var e=JSON.parse(b.data);e.showblock||e.canmanage?e.participation&&!e.maxvalue?a(".block_groupactivity").hide():c.render("block_groupactivity/main",e).then(function(a,b){c.replaceNodeContents(".groupactivity-wrapper",a,b),e.selfassessbutton>0&&(1==e.selfassessbutton?showModal=1:showModal=0,require(["block_groupactivity/modal"],function(a){a.init(d.instanceid,showModal)})),e.useritems.length&&e.maxvalue&&require(["block_groupactivity/graph"],function(a){a.init(e.items,e.maxvalue,e.useritems)})}).fail(function(a){c.replaceNodeContents(".groupactivity-wrapper","rendering failed")}):a(".block_groupactivity").hide()}).fail(function(a){c.replaceNodeContents(".groupactivity-wrapper","request failed")})},{init:function(a){getPluginData(a)}}});